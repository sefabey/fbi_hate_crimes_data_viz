---
title: "fbi_hate_crimes_quarterly"
author: "Sefa Ozalp"
date: "2019-11-15"
output: 
  workflowr::wflow_html:
    toc: yes
    toc_float: yes
    theme: cosmo
    highlight: textmate
    pandoc_args: ["--bibliography=rushin.bib"]
bibliography: rushin.bib
editor_options:
  chunk_output_type: console
---



# Introduction
This document will recreate the Figure 2 from the 'The Effect of President Trump's Election on Hate Crimes' paper [@rushin-2018-EffectPresidentTrump-sej]. A screenshot of the plot is provided below ![Figure 2, Rushin and Edwards, 2018](assets/rushin_static.png)

This is a line chart, illustrating a detranded time series of quarterly aggregated hate crime counts time series as recorded in the FBI dataset between 1992 and 2017. Even after being detrended, we observe a very large spike after 9/11. The second largest spike is after Trump's election. The authors find that 

## Sub-tasks

The sub-tasks to recreate the graph are as follows:

Find the data of hate crimes between 1992 and 2017 on FBI website.
Import and process the data. 
Detrend the data.
Reproduce the graph. 





```{r, warning=F, message=F}
library(tidyverse)
```


```{r}
load(here::here("/data/open_ICPSR/ucr_hate_crimes_1992_2017_rda/ucr_hate_crimes_1992_2017.rda"))
```


Lets check the data over.
```{r}

x <- lubridate::ymd(c("2012-03-26", "2012-05-04", "2012-09-23", "2012-12-31"))
lubridate::quarter(x, with_year = T)

ucr_hate_crimes_1992_2017 %>% 
  as.tibble() %>% 
  select(contains("year"), contains("date")) %>% 
  mutate(date= lubridate::ymd(date), quarter= lubridate::quarter(date,with_year = T)) %>% 
  count(quarter, year) %>% 
  filter(!is.na(quarter)) %>% filter(year==2016) %>% 
  summarise(sum(n))
  ggplot(aes(x=quarter, y=n))+
  geom_line()+
  scale_x_continuous(breaks = seq(1992,2017,4))

```
