<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Sefa Ozalp" />

<meta name="date" content="2019-11-15" />

<title>Detrending National Hate Crime Figures in the US, 1991-2018</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">fbi_hate_crimes_data_viz</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="license.html">License</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<!-- Add a small amount of space between sections. -->
<style type="text/css">
div.section {
  padding-top: 12px;
}
</style>

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Detrending National Hate Crime Figures in the US, 1991-2018</h1>
<h4 class="author">Sefa Ozalp</h4>
<h4 class="date">2019-11-15</h4>

</div>


<p>
<button type="button" class="btn btn-default btn-workflowr btn-workflowr-report" data-toggle="collapse" data-target="#workflowr-report">
<span class="glyphicon glyphicon-list" aria-hidden="true"></span> workflowr <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span>
</button>
</p>
<div id="workflowr-report" class="collapse">
<ul class="nav nav-tabs">
<li class="active">
<a data-toggle="tab" href="#summary">Summary</a>
</li>
<li>
<a data-toggle="tab" href="#checks"> Checks <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> </a>
</li>
<li>
<a data-toggle="tab" href="#versions">Past versions</a>
</li>
</ul>
<div class="tab-content">
<div id="summary" class="tab-pane fade in active">
<p>
<strong>Last updated:</strong> 2020-07-01
</p>
<p>
<strong>Checks:</strong> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> 7 <span class="glyphicon glyphicon-exclamation-sign text-danger" aria-hidden="true"></span> 0
</p>
<p>
<strong>Knit directory:</strong> <code>fbi_hate_crimes_data_viz/</code> <span class="glyphicon glyphicon-question-sign" aria-hidden="true" title="This is the local directory in which the code in this file was executed."> </span>
</p>
<p>
This reproducible <a href="http://rmarkdown.rstudio.com">R Markdown</a> analysis was created with <a
  href="https://github.com/jdblischak/workflowr">workflowr</a> (version 1.4.0). The <em>Checks</em> tab describes the reproducibility checks that were applied when the results were created. The <em>Past versions</em> tab lists the development history.
</p>
<hr>
</div>
<div id="checks" class="tab-pane fade">
<div id="workflowr-checks" class="panel-group">
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongRMarkdownfilestronguptodate"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>R Markdown file:</strong> up-to-date </a>
</p>
</div>
<div id="strongRMarkdownfilestronguptodate" class="panel-collapse collapse">
<div class="panel-body">
<p>Great! Since the R Markdown file has been committed to the Git repository, you know the exact version of the code that produced these results.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongEnvironmentstrongempty"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Environment:</strong> empty </a>
</p>
</div>
<div id="strongEnvironmentstrongempty" class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! The global environment was empty. Objects defined in the global environment can affect the analysis in your R Markdown file in unknown ways. For reproduciblity it’s best to always run the code in an empty environment.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongSeedstrongcodesetseed20191114code"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Seed:</strong> <code>set.seed(20191114)</code> </a>
</p>
</div>
<div id="strongSeedstrongcodesetseed20191114code" class="panel-collapse collapse">
<div class="panel-body">
<p>The command <code>set.seed(20191114)</code> was run prior to running the code in the R Markdown file. Setting a seed ensures that any results that rely on randomness, e.g. subsampling or permutations, are reproducible.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongSessioninformationstrongrecorded"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Session information:</strong> recorded </a>
</p>
</div>
<div id="strongSessioninformationstrongrecorded" class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! Recording the operating system, R version, and package versions is critical for reproducibility.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongCachestrongnone"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Cache:</strong> none </a>
</p>
</div>
<div id="strongCachestrongnone" class="panel-collapse collapse">
<div class="panel-body">
<p>Nice! There were no cached chunks for this analysis, so you can be confident that you successfully produced the results during this run.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongFilepathsstrongrelative"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>File paths:</strong> relative </a>
</p>
</div>
<div id="strongFilepathsstrongrelative" class="panel-collapse collapse">
<div class="panel-body">
<p>Great job! Using relative paths to the files within your workflowr project makes it easier to run your code on other machines.</p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<p class="panel-title">
<a data-toggle="collapse" data-parent="#workflowr-checks" href="#strongRepositoryversionstrongahrefhttpsgithubcomsefabeyfbihatecrimesdataviztree767c81275179f1e67db21588d1471d101fbbb2actargetblank767c812a"> <span class="glyphicon glyphicon-ok text-success" aria-hidden="true"></span> <strong>Repository version:</strong> <a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/tree/767c81275179f1e67db21588d1471d101fbbb2ac" target="_blank">767c812</a> </a>
</p>
</div>
<div id="strongRepositoryversionstrongahrefhttpsgithubcomsefabeyfbihatecrimesdataviztree767c81275179f1e67db21588d1471d101fbbb2actargetblank767c812a" class="panel-collapse collapse">
<div class="panel-body">
<p>
Great! You are using Git for version control. Tracking code development and connecting the code version to the results is critical for reproducibility. The version displayed above was the version of the Git repository at the time these results were generated. <br><br> Note that you need to be careful to ensure that all relevant files for the analysis have been committed to Git prior to generating the results (you can use <code>wflow_publish</code> or <code>wflow_git_commit</code>). workflowr only checks the R Markdown file, but you know if there are other scripts or data files that it depends on. Below is the status of the Git repository when the results were generated:
</p>
<pre><code>
Ignored files:
    Ignored:    .DS_Store
    Ignored:    .Rhistory
    Ignored:    .Rproj.user/
    Ignored:    data/.DS_Store
    Ignored:    data/data_2016/.DS_Store
    Ignored:    data/data_2016/Hate Crime Statistics 2016 Tables/.DS_Store
    Ignored:    data/data_2017/.DS_Store
    Ignored:    data/data_2017/raw/.DS_Store
    Ignored:    data/data_2017/raw/Hate Crime Statistics 2017 Tables/.DS_Store
    Ignored:    data/data_2018/.DS_Store
    Ignored:    data/data_2018/Tables And Data Declarations/.DS_Store
    Ignored:    data/data_2018/Tables And Data Declarations/Participation Table/.DS_Store
    Ignored:    data/data_2018/Tables And Data Declarations/Table 1/.DS_Store
    Ignored:    data/data_2018/Tables And Data Declarations/Table 10/.DS_Store
    Ignored:    data/data_2018/Tables And Data Declarations/Table 11/.DS_Store
    Ignored:    data/data_2018/Tables And Data Declarations/Table 12/.DS_Store
    Ignored:    data/data_2018/Tables And Data Declarations/Table 13/.DS_Store
    Ignored:    data/data_2018/Tables And Data Declarations/Table 14/.DS_Store
    Ignored:    data/data_2018/Tables And Data Declarations/Table 2/.DS_Store
    Ignored:    data/data_2018/Tables And Data Declarations/Table 3/.DS_Store
    Ignored:    data/data_2018/Tables And Data Declarations/Table 4/.DS_Store
    Ignored:    data/data_2018/Tables And Data Declarations/Table 5/.DS_Store
    Ignored:    data/data_2018/Tables And Data Declarations/Table 6/.DS_Store
    Ignored:    data/data_2018/Tables And Data Declarations/Table 7/.DS_Store
    Ignored:    data/data_2018/Tables And Data Declarations/Table 8/.DS_Store
    Ignored:    data/data_2018/Tables And Data Declarations/Table 9/.DS_Store
    Ignored:    data/edwards_data/.DS_Store
    Ignored:    data/open_ICPSR/.DS_Store
    Ignored:    data/ucrpd/.DS_Store
    Ignored:    data/ucrpd/data_1992/.DS_Store
    Ignored:    data/ucrpd/data_1992/ds1_batch_header/.DS_Store
    Ignored:    data/ucrpd/data_1992/ds2_incident_record/.DS_Store
    Ignored:    data/ucrpd/data_1993/.DS_Store
    Ignored:    data/ucrpd/data_1993/ICPSR_24240/.DS_Store
    Ignored:    data/ucrpd/data_1994/
    Ignored:    data/ucrpd/data_1995/
    Ignored:    data/ucrpd/data_1996/
    Ignored:    data/ucrpd/data_1997/
    Ignored:    data/ucrpd/data_1998/
    Ignored:    data/ucrpd/data_1999/
    Ignored:    data/ucrpd/data_2000/
    Ignored:    data/ucrpd/data_2001/
    Ignored:    data/ucrpd/data_2002/
    Ignored:    data/ucrpd/data_2003/
    Ignored:    data/ucrpd/data_2004/
    Ignored:    data/ucrpd/data_2005/
    Ignored:    data/ucrpd/data_2006/
    Ignored:    data/ucrpd/data_2007/
    Ignored:    data/ucrpd/data_2008/
    Ignored:    data/ucrpd/data_2009/
    Ignored:    data/ucrpd/data_2010/
    Ignored:    data/ucrpd/data_2011/
    Ignored:    data/ucrpd/data_2012/
    Ignored:    data/ucrpd/data_2013/
    Ignored:    data/ucrpd/data_2014/
    Ignored:    data/ucrpd/data_2015/
    Ignored:    data/ucrpd/data_2016/
    Ignored:    data/ucrpd/data_2017/
    Ignored:    data/ucrpd/data_2018/
    Ignored:    data/ucrpd/data_2019/
    Ignored:    docs/.DS_Store
    Ignored:    src/.DS_Store

Untracked files:
    Untracked:  data/open_ICPSR/ucr_hate_crimes_1991_2018_rda.zip
    Untracked:  data/open_ICPSR/ucr_hate_crimes_1991_2018_rda/

</code></pre>
<p>
Note that any generated files, e.g. HTML, png, CSS, etc., are not included in this status report because it is ok for generated content to have uncommitted changes.
</p>
</div>
</div>
</div>
</div>
<hr>
</div>
<div id="versions" class="tab-pane fade">

<p>
These are the previous versions of the R Markdown and HTML files. If you’ve configured a remote Git repository (see <code>?wflow_git_remote</code>), click on the hyperlinks in the table below to view them.
</p>
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
File
</th>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
<th>
Message
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
rmd
</td>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/767c81275179f1e67db21588d1471d101fbbb2ac/analysis/fbi_hate_crimes_quarterly.rmd" target="_blank">767c812</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-07-01
</td>
<td>
merge anti arab with anti muslim
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/76c47fd9a8f85dde5d4f4cf1cd037f0c3e296529/docs/fbi_hate_crimes_quarterly.html" target="_blank">76c47fd</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-07-01
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
rmd
</td>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/1e43434e2ffc8a96900b8005213910b3004671c7/analysis/fbi_hate_crimes_quarterly.rmd" target="_blank">1e43434</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-07-01
</td>
<td>
update 2018 data and add quarter comparison
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/b0ef67a5009fe47b6a05fdb0fc0eec1201c61aa7/docs/fbi_hate_crimes_quarterly.html" target="_blank">b0ef67a</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-06-17
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
rmd
</td>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/4e79e92ab2a5766ee921e66af3f63252d5642e9a/analysis/fbi_hate_crimes_quarterly.rmd" target="_blank">4e79e92</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-06-17
</td>
<td>
add LGBTI analysis
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/e6cf48918ba7e4203b513e4b6bbd1234afaa11ea/docs/fbi_hate_crimes_quarterly.html" target="_blank">e6cf489</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-06-17
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
rmd
</td>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/2f5b1497c2532d156679b00e6dc0f447e35f7f2a/analysis/fbi_hate_crimes_quarterly.rmd" target="_blank">2f5b149</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-06-17
</td>
<td>
fix titles and typos
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/cd25ee057eda4fbeac010350b8d7d3d2acc7012b/docs/fbi_hate_crimes_quarterly.html" target="_blank">cd25ee0</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-06-17
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
rmd
</td>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/81c152936ded26950c0ce3c60d0eb8fb114135a8/analysis/fbi_hate_crimes_quarterly.rmd" target="_blank">81c1529</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-06-17
</td>
<td>
wflow_publish(“analysis/fbi_hate_crimes_quarterly.rmd”)
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/232a1162a9eb8b6224e163328addbc27203e3eb4/docs/fbi_hate_crimes_quarterly.html" target="_blank">232a116</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-02-26
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
rmd
</td>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/d1f8069a8a55a98301b9afffa4d08a9d62780348/analysis/fbi_hate_crimes_quarterly.rmd" target="_blank">d1f8069</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-02-26
</td>
<td>
wflow_publish(“analysis/fbi_hate_crimes_quarterly.rmd”)
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/32106bf34a38de1465139c3850240bdaac4485e2/docs/fbi_hate_crimes_quarterly.html" target="_blank">32106bf</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-02-26
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
rmd
</td>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/71469eb5b1c7776084cf9f9ef17ba9a7762ba147/analysis/fbi_hate_crimes_quarterly.rmd" target="_blank">71469eb</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-02-26
</td>
<td>
workflowr::wflow_publish(“analysis/fbi_hate_crimes_quarterly.rmd”)
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/d15e97ba5b376351094edc34580a6d453d97b280/docs/fbi_hate_crimes_quarterly.html" target="_blank">d15e97b</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-12-12
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
rmd
</td>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/f379d7c4f0c3cf5d3729c910c3eeb94e169e4a0d/analysis/fbi_hate_crimes_quarterly.rmd" target="_blank">f379d7c</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-12-12
</td>
<td>
drop Q1 stuff
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/2d115e2f11b1836177190a0be707f44b4d499a9b/docs/fbi_hate_crimes_quarterly.html" target="_blank">2d115e2</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-12-12
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/632cd838a2396aa8b5637e34c868449a79a6a0c8/docs/fbi_hate_crimes_quarterly.html" target="_blank">632cd83</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-12-12
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
rmd
</td>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/a8e8007348c9d23b2171074ae1011e488fb19711/analysis/fbi_hate_crimes_quarterly.rmd" target="_blank">a8e8007</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-12-12
</td>
<td>
wflow_publish(c(“analysis/fbi_hate_crimes_1992.rmd”,
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/b8e45e70b65890f1570e1886ff142ca51aaba1d1/docs/fbi_hate_crimes_quarterly.html" target="_blank">b8e45e7</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-12-12
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
rmd
</td>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/38e517f20d8ae7c587e9320bb89891bf7da69055/analysis/fbi_hate_crimes_quarterly.rmd" target="_blank">38e517f</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-12-12
</td>
<td>
wflow_publish(c(“analysis/fbi_hate_crimes_1992.rmd”,
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/c9ae9991613f394e49f27693425e6f01abeaea02/docs/fbi_hate_crimes_quarterly.html" target="_blank">c9ae999</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-12-12
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
rmd
</td>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/5fdefcde0fefa2f7e71d6e85e34d14fbb1b2253c/analysis/fbi_hate_crimes_quarterly.rmd" target="_blank">5fdefcd</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-12-12
</td>
<td>
wflow_publish(c(“analysis/fbi_hate_crimes_1992.rmd”,
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/7020e8192cbf9e1af9818faca8eeac602c904ebf/docs/fbi_hate_crimes_quarterly.html" target="_blank">7020e81</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-19
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
rmd
</td>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/ba72196923beaed9e71bcae10cdd8c4bb41e8ece/analysis/fbi_hate_crimes_quarterly.rmd" target="_blank">ba72196</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-19
</td>
<td>
polish yearly plot
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/6a419885559b814288b5004c086240c987275bec/docs/fbi_hate_crimes_quarterly.html" target="_blank">6a41988</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-19
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/559c7f0dd4b3ecfb0d0e8ed8487a21239f09f8ef/docs/fbi_hate_crimes_quarterly.html" target="_blank">559c7f0</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-19
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
rmd
</td>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/4db356fd98a008ed0af74cb1c61c5053b0f67b37/analysis/fbi_hate_crimes_quarterly.rmd" target="_blank">4db356f</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-19
</td>
<td>
add title references
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/f002d4fb5b8c96356a8d59c3e2ca5899d480c086/docs/fbi_hate_crimes_quarterly.html" target="_blank">f002d4f</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-19
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
rmd
</td>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/7e57593573362c70220fd2d8561d14d8a7199c49/analysis/fbi_hate_crimes_quarterly.rmd" target="_blank">7e57593</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-19
</td>
<td>
correct type in the titles
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/68b4e473e8c0098412bbe06f26b6953d17668bef/docs/fbi_hate_crimes_quarterly.html" target="_blank">68b4e47</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-19
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
rmd
</td>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/bdd6b5ece63e9950197b848c374c47e253625087/analysis/fbi_hate_crimes_quarterly.rmd" target="_blank">bdd6b5e</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-19
</td>
<td>
update titles
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/aaf80dd46a7672605e4ffd77fa3e0682c9f9bfab/docs/fbi_hate_crimes_quarterly.html" target="_blank">aaf80dd</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-19
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/ae0c3e25b865e42360fb3be5ffc740d5a7ad7b24/docs/fbi_hate_crimes_quarterly.html" target="_blank">ae0c3e2</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-19
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
rmd
</td>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/d2b4f7857d522944a8f049b826fda2e6085725e4/analysis/fbi_hate_crimes_quarterly.rmd" target="_blank">d2b4f78</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-19
</td>
<td>
large commit with data using the data from Edwards
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/d2b4f7857d522944a8f049b826fda2e6085725e4/docs/fbi_hate_crimes_quarterly.html" target="_blank">d2b4f78</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-19
</td>
<td>
large commit with data using the data from Edwards
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/9277573cb13a87e602845a23af2b855b4c0ca7fd/docs/fbi_hate_crimes_quarterly.html" target="_blank">9277573</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-15
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
rmd
</td>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/cff9d6e2024c88fc0a8fa7c5e61d10e3393963c6/analysis/fbi_hate_crimes_quarterly.rmd" target="_blank">cff9d6e</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-15
</td>
<td>
analysis/index.Rmd
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/e368ec15cfdb471bac3bf01bb376b6571deeb9bc/docs/fbi_hate_crimes_quarterly.html" target="_blank">e368ec1</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-15
</td>
<td>
Build site.
</td>
</tr>
<tr>
<td>
rmd
</td>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/5e93796039f71c9c3b2bc9c850f78089a09a5c62/analysis/fbi_hate_crimes_quarterly.rmd" target="_blank">5e93796</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-15
</td>
<td>
update index
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/5e93796039f71c9c3b2bc9c850f78089a09a5c62/docs/fbi_hate_crimes_quarterly.html" target="_blank">5e93796</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-15
</td>
<td>
update index
</td>
</tr>
<tr>
<td>
rmd
</td>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/7627c7c5c3f966b949b3456fd3470911febfc94b/analysis/fbi_hate_crimes_quarterly.rmd" target="_blank">7627c7c</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-15
</td>
<td>
wip FBI data plots
</td>
</tr>
<tr>
<td>
html
</td>
<td>
<a href="https://rawcdn.githack.com/sefabey/fbi_hate_crimes_data_viz/7627c7c5c3f966b949b3456fd3470911febfc94b/docs/fbi_hate_crimes_quarterly.html" target="_blank">7627c7c</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-15
</td>
<td>
wip FBI data plots
</td>
</tr>
</tbody>
</table>
</div>
<hr>
</div>
</div>
</div>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>This document will recreate the Figure 2 from the ‘The Effect of President Trump’s Election on Hate Crimes’ paper <span class="citation">(Rushin and Edwards 2018)</span>. A screenshot of the plot is provided below <img src="assets/rushin_static.png" alt="Figure 2, Rushin and Edwards, 2018" /></p>
<p>In this line chart, the authors illustrate a detrended time series of the number of quarterly aggregated hate crimes in the US, as recorded in the FBI dataset between 1992 and 2017. Even after detrending the dataset, we observe a very large spike after 9/11. The second largest spike is after Trump’s election. Citing <span class="citation">(Hamilton 2018)</span>, the authors argue against using Hodrick-Prescott filter to detrend the seasonality in the data and use linear regression to subtract the quarterly and yearly effects. The authors do not provide data not the code in the paper but they might make both available on request.</p>
<div id="sub-tasks" class="section level2">
<h2>Sub-tasks</h2>
<p>The sub-tasks to recreate the graph are as follows:</p>
<ul>
<li>Find the data of hate crimes between 1992 and 2018 on FBI website.</li>
<li>Import and process the data.</li>
<li>Detrend the data using the same methodology as <span class="citation">(Rushin and Edwards 2018)</span>.</li>
<li>Reproduce the graph.</li>
</ul>
</div>
</div>
<div id="reproducing-the-figure-using-the-data-from-the-paper" class="section level1">
<h1>Reproducing the Figure Using the Data from the Paper</h1>
<pre class="r"><code>library(tidyverse)
library(lubridate)
library(scales)
knitr::opts_chunk$set(fig.width=10, fig.height=8)</code></pre>
<pre class="r"><code>edwards &lt;- haven::read_dta(here::here(&quot;/data/edwards_data/sefaozalp.dta&quot;)) %&gt;%  
  filter(!year %in% c(1985:1991) ) %&gt;% 
  filter(!is.na(hatecrimes)) %&gt;% 
  mutate(year_fct=as.factor(year), quarter_fct=as.factor(quarter))
  
  
  
linear_model &lt;- lm(hatecrimes~year_fct+quarter_fct, data = edwards)</code></pre>
<div id="regression-results" class="section level2">
<h2>Regression results</h2>
<pre class="r"><code>summary(linear_model)</code></pre>
<pre><code>
Call:
lm(formula = hatecrimes ~ year_fct + quarter_fct, data = edwards)

Residuals:
    Min      1Q  Median      3Q     Max 
 -0.809  -0.631  -0.559  -0.474 301.191 

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)   0.484576   0.037291  12.995  &lt; 2e-16 ***
year_fct1993  0.074678   0.049936   1.495 0.134789    
year_fct1994 -0.056334   0.049935  -1.128 0.259262    
year_fct1995  0.102244   0.049935   2.048 0.040606 *  
year_fct1996  0.166683   0.049932   3.338 0.000843 ***
year_fct1997  0.109271   0.049934   2.188 0.028648 *  
year_fct1998  0.083748   0.049931   1.677 0.093490 .  
year_fct1999  0.092995   0.049933   1.862 0.062548 .  
year_fct2000  0.104078   0.049932   2.084 0.037125 *  
year_fct2001  0.232612   0.049933   4.658 3.19e-06 ***
year_fct2002  0.060869   0.049935   1.219 0.222859    
year_fct2003  0.061860   0.049934   1.239 0.215409    
year_fct2004  0.074423   0.049934   1.490 0.136112    
year_fct2005  0.034325   0.049934   0.687 0.491827    
year_fct2006  0.077647   0.049933   1.555 0.119940    
year_fct2007  0.070178   0.049935   1.405 0.159905    
year_fct2008  0.083307   0.049935   1.668 0.095256 .  
year_fct2009 -0.009620   0.049935  -0.193 0.847228    
year_fct2010 -0.008831   0.049935  -0.177 0.859620    
year_fct2011 -0.042409   0.049935  -0.849 0.395726    
year_fct2012 -0.011658   0.049936  -0.233 0.815400    
year_fct2013 -0.066591   0.049935  -1.334 0.182352    
year_fct2014 -0.101956   0.049934  -2.042 0.041170 *  
year_fct2015 -0.074865   0.049933  -1.499 0.133792    
year_fct2016 -0.044155   0.049931  -0.884 0.376521    
year_fct2017  0.037715   0.049935   0.755 0.450082    
quarter_fct2  0.085000   0.019585   4.340 1.43e-05 ***
quarter_fct3  0.091694   0.019586   4.682 2.85e-06 ***
quarter_fct4  0.004990   0.019585   0.255 0.798906    
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 3.958 on 326764 degrees of freedom
Multiple R-squared:  0.0004988, Adjusted R-squared:  0.0004132 
F-statistic: 5.824 on 28 and 326764 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div id="detrend-data-using-residuals" class="section level2">
<h2>Detrend Data Using Residuals</h2>
<pre class="r"><code>edwards$predictions= predict(linear_model, edwards)
edwards$residuals= resid(linear_model)
edwards$mean= mean(edwards$hatecrimes)
edwards$hatedetrend=edwards$residuals+edwards$mean

edwards_processed &lt;-  edwards %&gt;% 
  arrange(date) %&gt;% 
  group_by(date, year, quarter) %&gt;% 
  summarise(hatedetrend=sum(hatedetrend), predictions=sum(predictions), residuals=sum(residuals), mean=sum(mean)) %&gt;% 
  ungroup() %&gt;% 
  mutate(quarter_str=paste(as.character(year), as.character(quarter),sep = &quot;-&quot;)) %&gt;% 
  mutate(quarter_date= yq(quarter_str))

edwards_processed</code></pre>
<pre><code># A tibble: 104 x 9
    date  year quarter hatedetrend predictions residuals  mean quarter_str
   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;      
 1   128  1992       1       1893.       1523.   100.    1792. 1992-1     
 2   129  1992       2       1986.       1790.   193.    1792. 1992-2     
 3   130  1992       3       1511.       1811.  -282.    1792. 1992-3     
 4   131  1992       4       1780.       1538.   -12.2   1792. 1992-4     
 5   132  1993       1       1833.       1757.    41.4   1792. 1993-1     
 6   133  1993       2       1792.       2024.    -0.247 1792. 1993-2     
 7   134  1993       3       1766.       2045.   -26.3   1792. 1993-3     
 8   135  1993       4       1777.       1773.   -14.9   1792. 1993-4     
 9   136  1994       1       1920.       1346.   127.    1792. 1994-1     
10   137  1994       2       1684.       1613.  -109.    1792. 1994-2     
# … with 94 more rows, and 1 more variable: quarter_date &lt;date&gt;</code></pre>
</div>
<div id="reproduce-the-plot" class="section level2">
<h2>Reproduce the Plot</h2>
<p>Finally, we can reproduce the plot.</p>
<pre class="r"><code>legend_points &lt;-  tibble(quarter_date= dmy(c(&quot;01-10-2016&quot;, &quot;01-10-2012&quot;, &quot;01-10-2008&quot;, &quot;01-07-2001&quot;)),
                         labels= c(&quot;Trump 2016&quot;, &quot;Obama 2012&quot;, &quot;Obama 2008&quot;, &quot;9/11&quot;)) %&gt;%
  left_join(edwards_processed) %&gt;% 
  arrange(quarter_date)</code></pre>
<pre><code>Joining, by = &quot;quarter_date&quot;</code></pre>
<pre class="r"><code>edwards_processed %&gt;%
  ggplot(aes(x=quarter_date, y=hatedetrend))+
  geom_line(size=0.8)+
  scale_y_continuous(labels = comma, limits = c(1400, 2600), breaks = seq(1500,3500,250), minor_breaks = NULL)+
  scale_x_date(breaks = seq.Date(dmy(&quot;01-01-1992&quot;), dmy(&quot;31-12-2018&quot;), by= &quot;2 year&quot;), 
               date_labels = &quot;%Y&quot;, 
               limits = c(lubridate::dmy(&quot;01-01-1992&quot;), lubridate::dmy(&quot;31-12-2018&quot;)),
               expand=c(0,0))+
  hrbrthemes::theme_ipsum_rc()+
  labs(title = &quot;Detrended Quarterly Hate Crime in the US, 1991-2018&quot;,
       y=&quot;Number of Hate Crime Incidents (Detrended)&quot;,
       x= &quot;Date (Quarter)&quot;,
       subtitle = &quot;Source: FBI Hate Crime Statistics&quot;,
       caption = &quot;Hate Lab, by @SefaOzalp, 2019&quot;
       )+
  theme(plot.caption = element_text(size = 12))+
  theme(axis.text.x = element_text(angle=45, hjust = 1))+
  geom_point(data=legend_points, aes(x=quarter_date, y= hatedetrend , shape=factor(labels)), size=3.5,colour=&quot;grey45&quot; )+
  theme(legend.position=&quot;bottom&quot;)+
  scale_shape_manual(values=c( 15,17, 19,18),
                     name = NULL)+
  NULL</code></pre>
<p><img src="figure/fbi_hate_crimes_quarterly.rmd/Rushin%20and%20Edwards%20Plot-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>
<button type="button" class="btn btn-default btn-xs btn-workflowr btn-workflowr-fig" data-toggle="collapse" data-target="#fig-no-spaces-Rushin-and-Edwards-Plot-1">
Past versions of “Rushin and Edwards Plot-1.png”
</button>
</p>
<div id="fig-no-spaces-Rushin-and-Edwards-Plot-1" class="collapse">
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/76c47fd9a8f85dde5d4f4cf1cd037f0c3e296529/docs/figure/fbi_hate_crimes_quarterly.rmd/Rushin and Edwards Plot-1.png" target="_blank">76c47fd</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-07-01
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/d15e97ba5b376351094edc34580a6d453d97b280/docs/figure/fbi_hate_crimes_quarterly.rmd/Rushin and Edwards Plot-1.png" target="_blank">d15e97b</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-12-12
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/632cd838a2396aa8b5637e34c868449a79a6a0c8/docs/figure/fbi_hate_crimes_quarterly.rmd/Rushin and Edwards Plot-1.png" target="_blank">632cd83</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-12-12
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/b8e45e70b65890f1570e1886ff142ca51aaba1d1/docs/figure/fbi_hate_crimes_quarterly.rmd/Rushin and Edwards Plot-1.png" target="_blank">b8e45e7</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-12-12
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/c9ae9991613f394e49f27693425e6f01abeaea02/docs/figure/fbi_hate_crimes_quarterly.rmd/Rushin and Edwards Plot-1.png" target="_blank">c9ae999</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-12-12
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="reproduce-the-same-plot-using-fbi-data" class="section level1">
<h1>Reproduce the Same Plot Using FBI data</h1>
<pre class="r"><code># load(here::here(&quot;/data/open_ICPSR/ucr_hate_crimes_1992_2017_rda/ucr_hate_crimes_1992_2017.rda&quot;))

load(here::here(&quot;/data/open_ICPSR/ucr_hate_crimes_1991_2018_rda/ucr_hate_crimes_1991_2018.rda&quot;))</code></pre>
<p>Lets check the raw data aggregated quarterly.</p>
<pre class="r"><code>qt_hate &lt;- ucr_hate_crimes_1991_2018 %&gt;% 
  as.tibble() %&gt;% 
  filter(!is.na(bias_motivation_offense_1)) %&gt;% 
  select(contains(&quot;year&quot;), contains(&quot;date&quot;)) %&gt;% 
  mutate(date= lubridate::ymd(incident_date), # data source changed date to incident_date
         quarter= lubridate::quarter(date,with_year = T), 
         quarter_fct= as.factor(lubridate::quarter(date,with_year = F)),
         year_fct=as.factor(year)) %&gt;% 
  count(quarter, quarter_fct, year, year_fct) %&gt;% 
  filter(!is.na(quarter)) %&gt;% 
  rename(hatecrimes=n)</code></pre>
<pre><code>Warning: `as.tibble()` is deprecated, use `as_tibble()` (but mind the new semantics).
This warning is displayed once per session.</code></pre>
<pre class="r"><code>qt_hate %&gt;% 
  ggplot(aes(x=quarter, y=hatecrimes))+
  geom_line(size=0.8)+
  scale_x_continuous(breaks = seq(1991,2018,1), expand=c(0.01,0))+
  hrbrthemes::theme_ipsum_rc()+
  scale_y_continuous(label=comma, breaks = seq(0,3500, 500), limits = c(0,3500), minor_breaks = NULL)+
  labs(title = &quot;Quarterly Aggregated Hate Crime Incidents in the US, 1991-2018&quot;,
       y=&quot;Number of Hate Crime Incidents&quot;,
       subtitle = &quot;Source: FBI Hate Crime Statistics&quot;,
       caption = &quot;HateLab, by @SefaOzalp, 2020&quot;
       )+
  theme(plot.caption = element_text(size = 12))+
  theme(axis.text.x = element_text(angle=45, hjust = 1))</code></pre>
<p><img src="figure/fbi_hate_crimes_quarterly.rmd/quarterly_aggregated_data-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>
<button type="button" class="btn btn-default btn-xs btn-workflowr btn-workflowr-fig" data-toggle="collapse" data-target="#fig-quarterly_aggregated_data-1">
Past versions of quarterly_aggregated_data-1.png
</button>
</p>
<div id="fig-quarterly_aggregated_data-1" class="collapse">
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/76c47fd9a8f85dde5d4f4cf1cd037f0c3e296529/docs/figure/fbi_hate_crimes_quarterly.rmd/quarterly_aggregated_data-1.png" target="_blank">76c47fd</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-07-01
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/232a1162a9eb8b6224e163328addbc27203e3eb4/docs/figure/fbi_hate_crimes_quarterly.rmd/quarterly_aggregated_data-1.png" target="_blank">232a116</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-02-26
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/7020e8192cbf9e1af9818faca8eeac602c904ebf/docs/figure/fbi_hate_crimes_quarterly.rmd/quarterly_aggregated_data-1.png" target="_blank">7020e81</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-19
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="compare-raw-numbers" class="section level2">
<h2>Compare Raw Numbers</h2>
<pre class="r"><code>qt_ucr_plot &lt;- qt_hate %&gt;% 
  ggplot(aes(x=quarter, y=hatecrimes))+
  geom_line(size=0.8)

qt_edwards_plot &lt;- edwards %&gt;% 
  group_by(quarter, year) %&gt;% 
  summarise(hatecrimes=sum(hatecrimes)) %&gt;% 
  mutate(quarter_date=dmy(paste( &quot;01&quot;, as.character(quarter), as.character(year),sep = &quot;-&quot; ))) %&gt;%
  ggplot(aes(x=quarter_date, y=hatecrimes))+
  geom_line(size=0.8)
  
gridExtra::grid.arrange(qt_ucr_plot,qt_edwards_plot, nrow=2 )</code></pre>
<p><img src="figure/fbi_hate_crimes_quarterly.rmd/compare_raw_counts-1.png" width="960" style="display: block; margin: auto;" /></p>
<p>
<button type="button" class="btn btn-default btn-xs btn-workflowr btn-workflowr-fig" data-toggle="collapse" data-target="#fig-compare_raw_counts-1">
Past versions of compare_raw_counts-1.png
</button>
</p>
<div id="fig-compare_raw_counts-1" class="collapse">
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/76c47fd9a8f85dde5d4f4cf1cd037f0c3e296529/docs/figure/fbi_hate_crimes_quarterly.rmd/compare_raw_counts-1.png" target="_blank">76c47fd</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-07-01
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/232a1162a9eb8b6224e163328addbc27203e3eb4/docs/figure/fbi_hate_crimes_quarterly.rmd/compare_raw_counts-1.png" target="_blank">232a116</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-02-26
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/32106bf34a38de1465139c3850240bdaac4485e2/docs/figure/fbi_hate_crimes_quarterly.rmd/compare_raw_counts-1.png" target="_blank">32106bf</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-02-26
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/7020e8192cbf9e1af9818faca8eeac602c904ebf/docs/figure/fbi_hate_crimes_quarterly.rmd/compare_raw_counts-1.png" target="_blank">7020e81</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-19
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="linear-model-with-ucr-data" class="section level2">
<h2>Linear Model with UCR Data</h2>
<pre class="r"><code>lm_ucr_hc &lt;- lm(hatecrimes~ year_fct + quarter_fct, data = qt_hate)</code></pre>
</div>
<div id="regression-results-1" class="section level2">
<h2>Regression results</h2>
<pre class="r"><code>summary(linear_model)</code></pre>
<pre><code>
Call:
lm(formula = hatecrimes ~ year_fct + quarter_fct, data = edwards)

Residuals:
    Min      1Q  Median      3Q     Max 
 -0.809  -0.631  -0.559  -0.474 301.191 

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)   0.484576   0.037291  12.995  &lt; 2e-16 ***
year_fct1993  0.074678   0.049936   1.495 0.134789    
year_fct1994 -0.056334   0.049935  -1.128 0.259262    
year_fct1995  0.102244   0.049935   2.048 0.040606 *  
year_fct1996  0.166683   0.049932   3.338 0.000843 ***
year_fct1997  0.109271   0.049934   2.188 0.028648 *  
year_fct1998  0.083748   0.049931   1.677 0.093490 .  
year_fct1999  0.092995   0.049933   1.862 0.062548 .  
year_fct2000  0.104078   0.049932   2.084 0.037125 *  
year_fct2001  0.232612   0.049933   4.658 3.19e-06 ***
year_fct2002  0.060869   0.049935   1.219 0.222859    
year_fct2003  0.061860   0.049934   1.239 0.215409    
year_fct2004  0.074423   0.049934   1.490 0.136112    
year_fct2005  0.034325   0.049934   0.687 0.491827    
year_fct2006  0.077647   0.049933   1.555 0.119940    
year_fct2007  0.070178   0.049935   1.405 0.159905    
year_fct2008  0.083307   0.049935   1.668 0.095256 .  
year_fct2009 -0.009620   0.049935  -0.193 0.847228    
year_fct2010 -0.008831   0.049935  -0.177 0.859620    
year_fct2011 -0.042409   0.049935  -0.849 0.395726    
year_fct2012 -0.011658   0.049936  -0.233 0.815400    
year_fct2013 -0.066591   0.049935  -1.334 0.182352    
year_fct2014 -0.101956   0.049934  -2.042 0.041170 *  
year_fct2015 -0.074865   0.049933  -1.499 0.133792    
year_fct2016 -0.044155   0.049931  -0.884 0.376521    
year_fct2017  0.037715   0.049935   0.755 0.450082    
quarter_fct2  0.085000   0.019585   4.340 1.43e-05 ***
quarter_fct3  0.091694   0.019586   4.682 2.85e-06 ***
quarter_fct4  0.004990   0.019585   0.255 0.798906    
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 3.958 on 326764 degrees of freedom
Multiple R-squared:  0.0004988, Adjusted R-squared:  0.0004132 
F-statistic: 5.824 on 28 and 326764 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div id="detrend-data-using-residuals-1" class="section level2">
<h2>Detrend Data Using Residuals</h2>
<pre class="r"><code>qt_hate$predictions= predict(lm_ucr_hc, qt_hate)
qt_hate$residuals= resid(lm_ucr_hc)
qt_hate$mean= mean(qt_hate$hatecrimes)
qt_hate$hatedetrend=qt_hate$residuals+qt_hate$mean


qt_hate %&gt;% 
  mutate(quarter_date=dmy(paste( &quot;01&quot;, as.character( (as.numeric(quarter_fct)*3-2) ), as.character(year_fct),sep = &quot;-&quot; ))) %&gt;%
  ggplot(aes(x=quarter_date, y=hatedetrend))+
  geom_line(size=0.8)+
  scale_y_continuous(labels = comma, limits = c(1250, 2750), breaks = seq(1500,3500,250), minor_breaks = NULL)+
  scale_x_date(breaks = seq.Date(dmy(&quot;01-01-1991&quot;), dmy(&quot;31-12-2018&quot;), by= &quot;1 year&quot;), 
               date_labels = &quot;%Y-%m&quot;, 
               limits = c(lubridate::dmy(&quot;01-01-1991&quot;), lubridate::dmy(&quot;31-12-2018&quot;)),
               expand=c(0,0))+
  hrbrthemes::theme_ipsum_rc()+
  labs(title = &quot;Detrended Quarterly Hate Crime in the US, 1991-2018&quot;,
       y=&quot;Number of Hate Crime Incidents (Detrended)&quot;,
       x= &quot;Date (Quarter)&quot;,
       subtitle = &quot;Source: FBI Hate Crime Statistics&quot;,
       caption = &quot;Hate Lab, by @SefaOzalp, 2019&quot;
       )+
  theme(plot.caption = element_text(size = 12))+
  theme(axis.text.x = element_text(angle=45, hjust = 1))+
  geom_point(data=legend_points, aes(x=quarter_date, y= hatedetrend , shape=factor(labels)), size=4,colour=&quot;grey50&quot; )+
  theme(legend.position=&quot;bottom&quot;)+
  scale_shape_manual(values=c( 13,15, 17,18),
                     name = NULL)+
  NULL  </code></pre>
<p><img src="figure/fbi_hate_crimes_quarterly.rmd/unnamed-chunk-9-1.png" width="960" style="display: block; margin: auto;" /></p>
<p>
<button type="button" class="btn btn-default btn-xs btn-workflowr btn-workflowr-fig" data-toggle="collapse" data-target="#fig-unnamed-chunk-9-1">
Past versions of unnamed-chunk-9-1.png
</button>
</p>
<div id="fig-unnamed-chunk-9-1" class="collapse">
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/76c47fd9a8f85dde5d4f4cf1cd037f0c3e296529/docs/figure/fbi_hate_crimes_quarterly.rmd/unnamed-chunk-9-1.png" target="_blank">76c47fd</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-07-01
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/232a1162a9eb8b6224e163328addbc27203e3eb4/docs/figure/fbi_hate_crimes_quarterly.rmd/unnamed-chunk-9-1.png" target="_blank">232a116</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-02-26
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/32106bf34a38de1465139c3850240bdaac4485e2/docs/figure/fbi_hate_crimes_quarterly.rmd/unnamed-chunk-9-1.png" target="_blank">32106bf</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-02-26
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/7020e8192cbf9e1af9818faca8eeac602c904ebf/docs/figure/fbi_hate_crimes_quarterly.rmd/unnamed-chunk-9-1.png" target="_blank">7020e81</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2019-11-19
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="compare-both-models" class="section level1">
<h1>Compare Both Models</h1>
<pre class="r"><code>a &lt;- edwards_processed$hatedetrend  
b &lt;- qt_hate$hatedetrend
a</code></pre>
<pre><code>  [1] 1892.633 1985.563 1510.530 1779.956 1832.982 1791.923 1765.890
  [8] 1777.316 1919.633 1683.563 1752.530 1812.956 1814.383 1631.313
 [15] 1827.280 1895.706 1866.835 1808.680 1804.640 1690.238 1822.305
 [22] 1872.234 1713.086 1761.627 1842.499 1789.344 1764.304 1774.817
 [29] 1811.436 1855.281 1773.340 1729.766 1869.620 1750.447 1723.407
 [36] 1826.919 1415.766 1542.696 2548.424 1662.937 1831.383 1853.313
 [43] 1832.280 1651.706 1767.294 1818.200 1770.167 1813.592 1854.796
 [50] 1851.726 1690.613 1772.118 1848.784 1835.681 1703.681 1781.107
 [57] 1740.674 1854.595 1772.563 1801.991 1690.133 1843.063 1830.030
 [64] 1805.456 1818.883 1800.813 1740.780 1808.206 1822.956 1772.790
 [71] 1773.754 1799.183 1779.382 1828.321 1827.276 1733.704 1722.882
 [78] 1794.855 1767.742 1883.204 1980.264 1799.194 1761.161 1627.494
 [85] 1721.862 1843.791 1829.698 1773.332 1709.980 1798.910 1821.877
 [92] 1838.486 1679.861 1844.866 1802.758 1842.339 1649.499 1621.344
 [99] 1761.304 2138.817 1893.133 1729.063 1729.030 1817.456</code></pre>
<pre class="r"><code>b</code></pre>
<pre><code>  [1] 1664.000 1567.000 1940.500 1960.071 1893.750 1988.750 1494.250
  [8] 1754.821 1832.500 1796.500 1751.000 1751.571 1920.000 1687.000
 [15] 1736.500 1788.071 1814.750 1634.750 1811.250 1870.821 1866.500
 [22] 1811.500 1789.000 1664.571 1822.250 1874.250 1698.750 1736.321
 [29] 1840.500 1790.500 1747.000 1753.571 1810.500 1855.500 1761.000
 [36] 1704.571 1860.500 1753.500 1703.000 1814.571 1413.750 1550.750
 [43] 2535.250 1631.821 1833.750 1852.750 1816.250 1628.821 1762.000
 [50] 1818.000 1758.500 1793.071 1861.000 1855.000 1667.500 1748.071
 [57] 1849.500 1838.500 1689.000 1754.571 1734.750 1864.750 1764.250
 [64] 1767.821 1693.250 1843.250 1814.750 1780.321 1815.500 1798.500
 [71] 1722.000 1795.571 1816.250 1773.250 1767.750 1774.321 1789.250
 [78] 1828.250 1807.750 1706.321 1722.750 1796.750 1747.250 1864.821
 [85] 1980.000 1800.000 1751.500 1600.071 1721.750 1843.750 1816.250
 [92] 1749.821 1706.500 1800.500 1806.000 1818.571 1685.750 1840.750
 [99] 1785.250 1819.821 1648.000 1625.000 1747.500 2111.071 1893.500
[106] 1726.500 1711.000 1800.571 1668.500 1705.500 1781.000 1976.571</code></pre>
<pre class="r"><code>summary(a)</code></pre>
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1416    1748    1799    1792    1832    2548 </code></pre>
<pre class="r"><code>summary(b)</code></pre>
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1414    1726    1789    1783    1829    2535 </code></pre>
<pre class="r"><code>qplot(a)</code></pre>
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="figure/fbi_hate_crimes_quarterly.rmd/unnamed-chunk-10-1.png" width="960" style="display: block; margin: auto;" /></p>
<p>
<button type="button" class="btn btn-default btn-xs btn-workflowr btn-workflowr-fig" data-toggle="collapse" data-target="#fig-unnamed-chunk-10-1">
Past versions of unnamed-chunk-10-1.png
</button>
</p>
<div id="fig-unnamed-chunk-10-1" class="collapse">
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/232a1162a9eb8b6224e163328addbc27203e3eb4/docs/figure/fbi_hate_crimes_quarterly.rmd/unnamed-chunk-10-1.png" target="_blank">232a116</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-02-26
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/32106bf34a38de1465139c3850240bdaac4485e2/docs/figure/fbi_hate_crimes_quarterly.rmd/unnamed-chunk-10-1.png" target="_blank">32106bf</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-02-26
</td>
</tr>
</tbody>
</table>
</div>
</div>
<pre class="r"><code>qplot(b)</code></pre>
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="figure/fbi_hate_crimes_quarterly.rmd/unnamed-chunk-10-2.png" width="960" style="display: block; margin: auto;" /></p>
<p>
<button type="button" class="btn btn-default btn-xs btn-workflowr btn-workflowr-fig" data-toggle="collapse" data-target="#fig-unnamed-chunk-10-2">
Past versions of unnamed-chunk-10-2.png
</button>
</p>
<div id="fig-unnamed-chunk-10-2" class="collapse">
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/76c47fd9a8f85dde5d4f4cf1cd037f0c3e296529/docs/figure/fbi_hate_crimes_quarterly.rmd/unnamed-chunk-10-2.png" target="_blank">76c47fd</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-07-01
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/232a1162a9eb8b6224e163328addbc27203e3eb4/docs/figure/fbi_hate_crimes_quarterly.rmd/unnamed-chunk-10-2.png" target="_blank">232a116</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-02-26
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/32106bf34a38de1465139c3850240bdaac4485e2/docs/figure/fbi_hate_crimes_quarterly.rmd/unnamed-chunk-10-2.png" target="_blank">32106bf</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-02-26
</td>
</tr>
</tbody>
</table>
</div>
</div>
<pre class="r"><code>t.test(a,b)</code></pre>
<pre><code>
    Welch Two Sample t-test

data:  a and b
t = 0.57676, df = 213.48, p-value = 0.5647
alternative hypothesis: true difference in means is not equal to 0
95 percent confidence interval:
 -22.76149  41.59116
sample estimates:
mean of x mean of y 
 1792.308  1782.893 </code></pre>
<pre class="r"><code>wilcox.test(a,b)</code></pre>
<pre><code>
    Wilcoxon rank sum test with continuity correction

data:  a and b
W = 6289, p-value = 0.3115
alternative hypothesis: true location shift is not equal to 0</code></pre>
</div>
<div id="segregate-trends-for-anti-muslim-anti-latino-anti-black-and-anti-lgbti-hate-crimes" class="section level1">
<h1>Segregate trends for anti-Muslim, anti-Latino, Anti-Black and anti-LGBTI Hate Crimes</h1>
<pre class="r"><code>ucr_hate &lt;- ucr_hate_crimes_1991_2018 %&gt;% 
  as_tibble() %&gt;% 
  filter(!is.na(bias_motivation_offense_1)) %&gt;% 
  purrr::discard(~sum(is.na(.x))/length(.x)* 100 &gt;=50) %&gt;% 
  mutate(date=incident_date)

# rm(ucr_hate_crimes_1991_2018)

glimpse(ucr_hate)</code></pre>
<pre><code>Observations: 199,684
Variables: 125
$ ori                              &lt;chr&gt; &quot;AK00101&quot;, &quot;AK00102&quot;, &quot;AK00102&quot;…
$ ori9                             &lt;chr&gt; &quot;AK0010100&quot;, &quot;AK0010200&quot;, &quot;AK00…
$ hate_crime_incident_present_flag &lt;chr&gt; &quot;one or more hate crime inciden…
$ state                            &lt;chr&gt; &quot;alaska&quot;, &quot;alaska&quot;, &quot;alaska&quot;, &quot;…
$ state_abb                        &lt;chr&gt; &quot;AK&quot;, &quot;AK&quot;, &quot;AK&quot;, &quot;AK&quot;, &quot;AK&quot;, &quot;…
$ incident_date                    &lt;chr&gt; &quot;2018-07-05&quot;, &quot;2018-03-08&quot;, &quot;20…
$ month                            &lt;chr&gt; &quot;July&quot;, &quot;March&quot;, &quot;June&quot;, &quot;Augus…
$ month_num                        &lt;dbl&gt; 7, 3, 6, 8, 7, 9, 5, 7, 4, 11, …
$ day_of_week                      &lt;chr&gt; &quot;Thursday&quot;, &quot;Thursday&quot;, &quot;Monday…
$ year                             &lt;dbl&gt; 2018, 2018, 2018, 2018, 2018, 2…
$ population                       &lt;dbl&gt; 291992, 31635, 31635, 31635, 31…
$ agency_name                      &lt;chr&gt; &quot;anchorage&quot;, &quot;fairbanks&quot;, &quot;fair…
$ city_name                        &lt;chr&gt; &quot;anchorage&quot;, &quot;fairbanks&quot;, &quot;fair…
$ population_group                 &lt;chr&gt; &quot;city 250,000 thru 499,999&quot;, &quot;c…
$ country_division                 &lt;chr&gt; &quot;pacific&quot;, &quot;pacific&quot;, &quot;pacific&quot;…
$ country_region                   &lt;chr&gt; &quot;west&quot;, &quot;west&quot;, &quot;west&quot;, &quot;west&quot;,…
$ core_city                        &lt;chr&gt; &quot;yes&quot;, &quot;yes&quot;, &quot;yes&quot;, &quot;yes&quot;, &quot;no…
$ fbi_field_office                 &lt;chr&gt; &quot;3030&quot;, &quot;3030&quot;, &quot;3030&quot;, &quot;3030&quot;,…
$ judicial_district                &lt;chr&gt; &quot;020a&quot;, &quot;020a&quot;, &quot;020a&quot;, &quot;020a&quot;,…
$ date_ori_was_added               &lt;chr&gt; &quot;2020-01-01&quot;, &quot;2020-01-01&quot;, &quot;20…
$ state_first_quarter_activity     &lt;chr&gt; &quot;zero-report was submitted&quot;, &quot;i…
$ state_second_quarter_activity    &lt;chr&gt; &quot;zero-report was submitted&quot;, &quot;i…
$ state_third_quarter_activity     &lt;chr&gt; &quot;incident report was submitted&quot;…
$ state_fourth_quarter_activity    &lt;chr&gt; &quot;zero-report was submitted&quot;, &quot;z…
$ data_source                      &lt;chr&gt; &quot;floppy diskette&quot;, &quot;floppy disk…
$ quarter_of_the_year              &lt;chr&gt; &quot;july through september&quot;, &quot;janu…
$ agency_indicator                 &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA,…
$ fips_state_code                  &lt;chr&gt; &quot;02&quot;, &quot;02&quot;, &quot;02&quot;, &quot;02&quot;, &quot;02&quot;, &quot;…
$ fips_county_code                 &lt;chr&gt; &quot;020&quot;, &quot;090&quot;, &quot;090&quot;, &quot;090&quot;, &quot;11…
$ fips_state_county_code           &lt;chr&gt; &quot;02020&quot;, &quot;02090&quot;, &quot;02090&quot;, &quot;020…
$ fips_place_code                  &lt;chr&gt; &quot;03000&quot;, &quot;24230&quot;, &quot;24230&quot;, &quot;242…
$ agency_type                      &lt;chr&gt; &quot;local police department&quot;, &quot;loc…
$ crosswalk_agency_name            &lt;chr&gt; &quot;anchorage police department&quot;, …
$ census_name                      &lt;chr&gt; &quot;anchorage municipality&quot;, &quot;fair…
$ msa_code_1                       &lt;chr&gt; &quot;38&quot;, &quot;258&quot;, &quot;258&quot;, &quot;258&quot;, &quot;0&quot;,…
$ incident_number                  &lt;chr&gt; &quot;g-00-hc6x i&quot;, &quot;8d000mm0728n&quot;, …
$ unique_id                        &lt;chr&gt; &quot;2018_AK0010100_g-00-hc6x i&quot;, &quot;…
$ total_num_of_individual_victims  &lt;dbl&gt; 2, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1…
$ total_offenders                  &lt;dbl&gt; 0, 1, 1, 2, 0, 1, 1, 0, 0, 0, 0…
$ offenders_race_as_a_group        &lt;chr&gt; &quot;unknown&quot;, &quot;american indian or …
$ number_of_victims_offense_1      &lt;chr&gt; &quot;002&quot;, &quot;001&quot;, &quot;001&quot;, &quot;001&quot;, &quot;00…
$ ucr_offense_code_1               &lt;chr&gt; &quot;intimidation&quot;, &quot;simple assault…
$ bias_motivation_offense_1        &lt;chr&gt; &quot;anti-black&quot;, &quot;anti-white&quot;, &quot;an…
$ location_code_offense_1          &lt;chr&gt; &quot;service/gas station&quot;, &quot;residen…
$ vic_type_individual_offense_1    &lt;chr&gt; &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_individual_offense_2    &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_individual_offense_3    &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_individual_offense_4    &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_individual_offense_5    &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_individual_offense_6    &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_individual_offense_7    &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_individual_offense_8    &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_individual_offense_9    &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_individual_offense_10   &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_business_offense_1      &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_business_offense_2      &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_business_offense_3      &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_business_offense_4      &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_business_offense_5      &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_business_offense_6      &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_business_offense_7      &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_business_offense_8      &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_business_offense_9      &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_business_offense_10     &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_government_offense_1    &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_government_offense_2    &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_government_offense_3    &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_government_offense_4    &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_government_offense_5    &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_government_offense_6    &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_government_offense_7    &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_government_offense_8    &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_government_offense_9    &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_government_offense_10   &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_society_offense_1       &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_society_offense_2       &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_society_offense_3       &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_society_offense_4       &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_society_offense_5       &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_society_offense_6       &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_society_offense_7       &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_society_offense_8       &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_society_offense_9       &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_society_offense_10      &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_unknown_offense_1       &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_unknown_offense_2       &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_unknown_offense_3       &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_unknown_offense_4       &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_unknown_offense_5       &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_unknown_offense_6       &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_unknown_offense_7       &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_unknown_offense_8       &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_unknown_offense_9       &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_unknown_offense_10      &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_financial_offense_1     &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_financial_offense_2     &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_financial_offense_3     &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_financial_offense_4     &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_financial_offense_5     &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_financial_offense_6     &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_financial_offense_7     &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_financial_offense_8     &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_financial_offense_9     &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_financial_offense_10    &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_religious_offense_1     &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;1&quot;, &quot;1&quot;, &quot;…
$ vic_type_religious_offense_2     &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_religious_offense_3     &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_religious_offense_4     &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_religious_offense_5     &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_religious_offense_6     &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_religious_offense_7     &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_religious_offense_8     &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_religious_offense_9     &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_religious_offense_10    &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_other_offense_1         &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_other_offense_2         &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_other_offense_3         &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_other_offense_4         &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_other_offense_5         &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_other_offense_6         &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_other_offense_7         &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_other_offense_8         &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_other_offense_9         &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ vic_type_other_offense_10        &lt;chr&gt; &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;0&quot;, &quot;…
$ date                             &lt;chr&gt; &quot;2018-07-05&quot;, &quot;2018-03-08&quot;, &quot;20…</code></pre>
<pre class="r"><code>ucr_hate_small &lt;- ucr_hate %&gt;% 
  select(state, date, month, month_num, year, city_name, offenders_race_as_a_group, number_of_victims_offense_1, ucr_offense_code_1, bias_motivation_offense_1)

ucr_hate_small %&gt;% 
  count(bias_motivation_offense_1, sort = T) %&gt;% 
  print(n=50)</code></pre>
<pre><code># A tibble: 35 x 2
   bias_motivation_offense_1                                           n
   &lt;chr&gt;                                                           &lt;int&gt;
 1 anti-black                                                      68588
 2 anti-jewish                                                     25943
 3 anti-white                                                      23366
 4 anti-male homosexual (gay)                                      20188
 5 anti-hispanic                                                   12725
 6 anti-ethnicity other than hispanic                              10016
 7 anti-lesbian, gay, bisexual, or transgender, mixed group (lgbt)  5990
 8 anti-asian                                                       5891
 9 anti-multi-racial group                                          4811
10 anti-female homosexual (lesbian)                                 4221
11 anti-muslim                                                      3561
12 anti-other religion                                              3269
13 anti-american indian or native alaskan                           2195
14 anti-catholic                                                    1458
15 anti-protestant                                                  1196
16 anti-multi-religious group                                       1118
17 anti-arab                                                        1091
18 anti-mental disability                                            944
19 anti-heterosexual                                                 542
20 anti-bisexual                                                     527
21 anti-transgender                                                  513
22 anti-physical disability                                          503
23 anti-gender non-conforming                                        152
24 anti-atheism/agnosticism                                          149
25 anti-female                                                       142
26 anti-eastern orthodox (greek, russian, etc.)                      131
27 anti-other christian                                              130
28 anti-sikh                                                          80
29 anti-male                                                          77
30 anti-native hawaiian or other pacific islander                     49
31 anti-hindu                                                         40
32 anti-mormon                                                        38
33 anti-jehovahs witness                                              20
34 anti-buddhist                                                      19
35 99                                                                  1</code></pre>
<div id="anti-muslim-hate-crimes-since-1991." class="section level2">
<h2>Anti-Muslim Hate Crimes Since 1991.</h2>
<pre class="r"><code>qt_hate_muslim &lt;- ucr_hate_small %&gt;% 
  filter(bias_motivation_offense_1 %in% c(&quot;anti-muslim&quot;, &quot;anti-arab&quot;)) %&gt;% 
  select(contains(&quot;year&quot;), contains(&quot;date&quot;)) %&gt;% 
  mutate(date= lubridate::ymd(date), quarter= lubridate::quarter(date,with_year = T), 
         quarter_fct= as.factor(lubridate::quarter(date,with_year = F)), year_fct=as.factor(year)) %&gt;% 
  count(quarter, quarter_fct, year, year_fct) %&gt;% 
  filter(!is.na(quarter)) %&gt;% 
  rename(hatecrimes=n)</code></pre>
<div id="quarterly-aggregated-anti-muslim-hate-crimes-plot" class="section level3">
<h3>Quarterly Aggregated Anti-Muslim Hate Crimes Plot</h3>
<pre class="r"><code>legend_points_muslim &lt;-  tibble(quarter_date= dmy(c(&quot;01-10-2016&quot;, &quot;01-10-2012&quot;, &quot;01-10-2008&quot;, &quot;01-07-2001&quot;)),
                         labels= c(&quot;Trump 2016&quot;, &quot;Obama 2012&quot;, &quot;Obama 2008&quot;, &quot;9/11&quot;)) %&gt;%
  mutate(quarter= lubridate::quarter(quarter_date,with_year = T),  quarter_fct= as.factor(lubridate::quarter(quarter_date,with_year = F))) %&gt;% 
  left_join(qt_hate_muslim) %&gt;% 
  arrange(quarter_date)</code></pre>
<pre><code>Joining, by = c(&quot;quarter&quot;, &quot;quarter_fct&quot;)</code></pre>
<pre><code>Warning: Column `quarter_fct` joining factors with different levels,
coercing to character vector</code></pre>
<pre class="r"><code>qt_hate_muslim %&gt;% 
  mutate(quarter_date=dmy(paste( &quot;01&quot;, as.character( (as.numeric(quarter_fct)*3 -2) ), as.character(year_fct),sep = &quot;-&quot; ))) %&gt;% 
  ggplot(aes(x=quarter_date, y=hatecrimes))+
  geom_line(size=0.8)+
  scale_x_date(breaks = seq.Date(dmy(&quot;01-01-1991&quot;), dmy(&quot;31-12-2018&quot;), by= &quot;2 year&quot;), 
               date_labels = &quot;%Y-%m&quot;, 
               limits = c(lubridate::dmy(&quot;01-01-1991&quot;), lubridate::dmy(&quot;31-12-2018&quot;)),
               expand=c(0,0))+
  hrbrthemes::theme_ipsum_rc()+
  scale_y_continuous(label=comma, breaks = seq(0,600, 50), limits = c(0,600), minor_breaks = NULL)+
  labs(title = &quot;Quarterly Aggregated Anti-Muslim (Including Anti-Arab) Hate Crime Incidents in the US, 1991-2018&quot;,
       y=&quot;Number of Anti-Muslim and Anti-Arab Hate Crime Incidents&quot;,
       subtitle = &quot;Source: FBI Hate Crime Statistics&quot;,
       caption = &quot;HateLab, by @SefaOzalp, 2020&quot;
       )+
  theme(plot.caption = element_text(size = 12))+
  theme(axis.text.x = element_text(angle=45, hjust = 1))+
  geom_point(data=legend_points_muslim, aes(x=quarter_date, y= hatecrimes , shape=factor(labels)), size=4,colour=&quot;grey50&quot; )+
  theme(legend.position=&quot;bottom&quot;)+
  scale_shape_manual(values=c( 13,15, 17,18),
                     name = NULL)+
  NULL</code></pre>
<p><img src="figure/fbi_hate_crimes_quarterly.rmd/anti-muslim_incidents-1.png" width="5000" style="display: block; margin: auto;" /></p>
<p>
<button type="button" class="btn btn-default btn-xs btn-workflowr btn-workflowr-fig" data-toggle="collapse" data-target="#fig-anti-muslim_incidents-1">
Past versions of anti-muslim_incidents-1.png
</button>
</p>
<div id="fig-anti-muslim_incidents-1" class="collapse">
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/76c47fd9a8f85dde5d4f4cf1cd037f0c3e296529/docs/figure/fbi_hate_crimes_quarterly.rmd/anti-muslim_incidents-1.png" target="_blank">76c47fd</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-07-01
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/232a1162a9eb8b6224e163328addbc27203e3eb4/docs/figure/fbi_hate_crimes_quarterly.rmd/anti-muslim_incidents-1.png" target="_blank">232a116</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-02-26
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/32106bf34a38de1465139c3850240bdaac4485e2/docs/figure/fbi_hate_crimes_quarterly.rmd/anti-muslim_incidents-1.png" target="_blank">32106bf</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-02-26
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="detrending-anti-muslim-hate-crimes" class="section level3">
<h3>Detrending Anti-Muslim Hate Crimes</h3>
<pre class="r"><code>lm_antimuslim &lt;- lm(hatecrimes~ year_fct + quarter_fct, data = qt_hate_muslim)

summary(lm_antimuslim)</code></pre>
<pre><code>
Call:
lm(formula = hatecrimes ~ year_fct + quarter_fct, data = qt_hate_muslim)

Residuals:
     Min       1Q   Median       3Q      Max 
-168.214   -7.598    0.161    7.679  305.357 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)    12.464     23.801   0.524   0.6019    
year_fct1992   -2.000     31.989  -0.063   0.9503    
year_fct1993   -4.000     31.989  -0.125   0.9008    
year_fct1994   -3.500     31.989  -0.109   0.9131    
year_fct1995    0.250     31.989   0.008   0.9938    
year_fct1996   -4.000     31.989  -0.125   0.9008    
year_fct1997   -5.250     31.989  -0.164   0.8700    
year_fct1998   -9.500     31.989  -0.297   0.7672    
year_fct1999   -7.250     31.989  -0.227   0.8213    
year_fct2000   -4.500     31.989  -0.141   0.8885    
year_fct2001  163.750     31.989   5.119 2.03e-06 ***
year_fct2002   38.250     31.989   1.196   0.2353    
year_fct2003   20.250     31.989   0.633   0.5285    
year_fct2004   18.250     31.989   0.570   0.5699    
year_fct2005   11.250     31.989   0.352   0.7260    
year_fct2006   18.250     31.989   0.570   0.5699    
year_fct2007    8.000     31.989   0.250   0.8032    
year_fct2008    5.500     31.989   0.172   0.8639    
year_fct2009    6.000     31.989   0.188   0.8517    
year_fct2010   19.250     31.989   0.602   0.5490    
year_fct2011   18.500     31.989   0.578   0.5647    
year_fct2012   16.250     31.989   0.508   0.6128    
year_fct2013   13.250     31.989   0.414   0.6798    
year_fct2014   19.250     31.989   0.602   0.5490    
year_fct2015   53.500     31.989   1.672   0.0983 .  
year_fct2016   70.000     31.989   2.188   0.0315 *  
year_fct2017   73.750     31.989   2.305   0.0237 *  
year_fct2018   48.500     31.989   1.516   0.1334    
quarter_fct2    4.393     12.091   0.363   0.7173    
quarter_fct3   21.429     12.091   1.772   0.0801 .  
quarter_fct4    7.321     12.091   0.606   0.5465    
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 45.24 on 81 degrees of freedom
Multiple R-squared:  0.4692,    Adjusted R-squared:  0.2726 
F-statistic: 2.386 on 30 and 81 DF,  p-value: 0.001073</code></pre>
<pre class="r"><code>qt_hate_muslim$predictions= predict(lm_antimuslim, qt_hate_muslim)
qt_hate_muslim$residuals= resid(lm_antimuslim)
qt_hate_muslim$mean= mean(qt_hate_muslim$hatecrimes)
qt_hate_muslim$hatedetrend=qt_hate_muslim$residuals+qt_hate_muslim$mean


legend_points_muslim_det &lt;-  legend_points_muslim %&gt;% 
  left_join(qt_hate_muslim, by=&quot;quarter&quot;) %&gt;% 
  arrange(quarter_date)

legend_points_muslim_det</code></pre>
<pre><code># A tibble: 4 x 15
  quarter_date labels quarter quarter_fct.x year.x year_fct.x hatecrimes.x
  &lt;date&gt;       &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;fct&gt;             &lt;int&gt;
1 2001-07-01   9/11     2001. 3               2001 2001                503
2 2008-10-01   Obama…   2008. 4               2008 2008                 25
3 2012-10-01   Obama…   2012. 4               2012 2012                 31
4 2016-10-01   Trump…   2016. 4               2016 2016                109
# … with 8 more variables: quarter_fct.y &lt;fct&gt;, year.y &lt;dbl&gt;,
#   year_fct.y &lt;fct&gt;, hatecrimes.y &lt;int&gt;, predictions &lt;dbl&gt;,
#   residuals &lt;dbl&gt;, mean &lt;dbl&gt;, hatedetrend &lt;dbl&gt;</code></pre>
<pre class="r"><code>qt_hate_muslim %&gt;% 
  mutate(quarter_date=dmy(paste( &quot;01&quot;, as.character( (as.numeric(quarter_fct)*3 -2) ), as.character(year_fct),sep = &quot;-&quot; ))) %&gt;% 
  mutate(hatedetrend= ifelse(hatedetrend&lt;0, 0, hatedetrend)) %&gt;% 
  ggplot(aes(x=quarter_date, y=hatedetrend))+
  geom_line(size=0.8)+
  # scale_y_continuous(labels = comma, limits = c(1250, 2750), breaks = seq(1500,3500,250), minor_breaks = NULL)+
  scale_x_date(breaks = seq.Date(dmy(&quot;01-01-1991&quot;), dmy(&quot;31-12-2018&quot;), by= &quot;2 year&quot;), 
               date_labels = &quot;%Y-%m&quot;, 
               limits = c(lubridate::dmy(&quot;01-01-1991&quot;), lubridate::dmy(&quot;31-12-2018&quot;)),
               expand=c(0,0))+
  hrbrthemes::theme_ipsum_rc()+
  labs(title = &quot;Detrended Quarterly Anti-Muslim and Anti-Arab Hate Crime in the US, 1991-2018&quot;,
       y=&quot;Number of Anti-Muslim and Anti-Arab Hate Crime Incidents (Detrended)&quot;,
       x= &quot;Date (Quarter)&quot;,
       subtitle = &quot;Source: FBI Hate Crime Statistics&quot;,
       caption = &quot;HateLab, by @SefaOzalp, 2020&quot;
       )+
  theme(plot.caption = element_text(size = 12))+
  theme(axis.text.x = element_text(angle=45, hjust = 1))+
  geom_point(data=legend_points_muslim_det, aes(x=quarter_date, y= hatedetrend , shape=factor(labels)), size=4,colour=&quot;grey50&quot; )+
  theme(legend.position=&quot;bottom&quot;)+
  scale_shape_manual(values=c( 13,15, 17,18),
                     name = NULL)+
  NULL  </code></pre>
<p><img src="figure/fbi_hate_crimes_quarterly.rmd/antimuslim_detrended_plot-1.png" width="5000" style="display: block; margin: auto;" /></p>
<p>
<button type="button" class="btn btn-default btn-xs btn-workflowr btn-workflowr-fig" data-toggle="collapse" data-target="#fig-antimuslim_detrended_plot-1">
Past versions of antimuslim_detrended_plot-1.png
</button>
</p>
<div id="fig-antimuslim_detrended_plot-1" class="collapse">
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/76c47fd9a8f85dde5d4f4cf1cd037f0c3e296529/docs/figure/fbi_hate_crimes_quarterly.rmd/antimuslim_detrended_plot-1.png" target="_blank">76c47fd</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-07-01
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/232a1162a9eb8b6224e163328addbc27203e3eb4/docs/figure/fbi_hate_crimes_quarterly.rmd/antimuslim_detrended_plot-1.png" target="_blank">232a116</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-02-26
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/32106bf34a38de1465139c3850240bdaac4485e2/docs/figure/fbi_hate_crimes_quarterly.rmd/antimuslim_detrended_plot-1.png" target="_blank">32106bf</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-02-26
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="anti-hispanic-hate-crimes" class="section level2">
<h2>Anti-Hispanic Hate Crimes</h2>
<div id="anti-hispanic-hate-crimes-since-1991." class="section level3">
<h3>Anti-Hispanic Hate Crimes Since 1991.</h3>
<pre class="r"><code>qt_hate_hispanic &lt;- ucr_hate_small %&gt;% 
  filter(bias_motivation_offense_1 == &quot;anti-hispanic&quot;) %&gt;% 
  select(contains(&quot;year&quot;), contains(&quot;date&quot;)) %&gt;% 
  mutate(date= lubridate::ymd(date), quarter= lubridate::quarter(date,with_year = T), 
         quarter_fct= as.factor(lubridate::quarter(date,with_year = F)), year_fct=as.factor(year)) %&gt;% 
  count(quarter, quarter_fct, year, year_fct) %&gt;% 
  filter(!is.na(quarter)) %&gt;% 
  rename(hatecrimes=n)</code></pre>
</div>
<div id="quarterly-aggregated-anti-hispanic-hate-crimes-plot" class="section level3">
<h3>Quarterly Aggregated Anti-Hispanic Hate Crimes Plot</h3>
<pre class="r"><code>legend_points_hispanic &lt;-  tibble(quarter_date= dmy(c(&quot;01-10-2016&quot;, &quot;01-10-2012&quot;, &quot;01-10-2008&quot;, &quot;01-07-2001&quot;)),
                         labels= c(&quot;Trump 2016&quot;, &quot;Obama 2012&quot;, &quot;Obama 2008&quot;, &quot;9/11&quot;)) %&gt;%
  mutate(quarter= lubridate::quarter(quarter_date,with_year = T),  quarter_fct= as.factor(lubridate::quarter(quarter_date,with_year = F))) %&gt;% 
  left_join(qt_hate_hispanic) %&gt;% 
  arrange(quarter_date)</code></pre>
<pre><code>Joining, by = c(&quot;quarter&quot;, &quot;quarter_fct&quot;)</code></pre>
<pre><code>Warning: Column `quarter_fct` joining factors with different levels,
coercing to character vector</code></pre>
<pre class="r"><code>qt_hate_hispanic %&gt;% 
  mutate(quarter_date=dmy(paste( &quot;01&quot;, as.character( (as.numeric(quarter_fct)*3 -2) ), as.character(year_fct),sep = &quot;-&quot; ))) %&gt;% 
  ggplot(aes(x=quarter_date, y=hatecrimes))+
  geom_line(size=0.8)+
  scale_x_date(breaks = seq.Date(dmy(&quot;01-01-1991&quot;), dmy(&quot;31-12-2018&quot;), by= &quot;2 year&quot;), 
               date_labels = &quot;%Y-%m&quot;, 
               limits = c(lubridate::dmy(&quot;01-01-1991&quot;), lubridate::dmy(&quot;31-12-2018&quot;)),
               expand=c(0,0))+
  hrbrthemes::theme_ipsum_rc()+
  scale_y_continuous(label=comma, breaks = seq(0,250, 50), limits = c(0,250), minor_breaks = NULL)+
  labs(title = &quot;Quarterly Aggregated Anti-Hispanic Hate Crime Incidents in the US, 1991-2018&quot;,
       y=&quot;Number of Anti-Hispanic Hate Crime Incidents&quot;,
       subtitle = &quot;Source: FBI Hate Crime Statistics&quot;,
       caption = &quot;HateLab, by @SefaOzalp, 2020&quot;
       )+
  theme(plot.caption = element_text(size = 12))+
  theme(axis.text.x = element_text(angle=45, hjust = 1))+
  geom_point(data=legend_points_hispanic, aes(x=quarter_date, y= hatecrimes , shape=factor(labels)), size=4,colour=&quot;grey50&quot; )+
  theme(legend.position=&quot;bottom&quot;)+
  scale_shape_manual(values=c( 13,15, 17,18),
                     name = NULL)+
  NULL</code></pre>
<p><img src="figure/fbi_hate_crimes_quarterly.rmd/anti-hispanic_incidents-1.png" width="5000" style="display: block; margin: auto;" /></p>
<p>
<button type="button" class="btn btn-default btn-xs btn-workflowr btn-workflowr-fig" data-toggle="collapse" data-target="#fig-anti-hispanic_incidents-1">
Past versions of anti-hispanic_incidents-1.png
</button>
</p>
<div id="fig-anti-hispanic_incidents-1" class="collapse">
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/76c47fd9a8f85dde5d4f4cf1cd037f0c3e296529/docs/figure/fbi_hate_crimes_quarterly.rmd/anti-hispanic_incidents-1.png" target="_blank">76c47fd</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-07-01
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/232a1162a9eb8b6224e163328addbc27203e3eb4/docs/figure/fbi_hate_crimes_quarterly.rmd/anti-hispanic_incidents-1.png" target="_blank">232a116</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-02-26
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/32106bf34a38de1465139c3850240bdaac4485e2/docs/figure/fbi_hate_crimes_quarterly.rmd/anti-hispanic_incidents-1.png" target="_blank">32106bf</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-02-26
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="detrending-anti-hispanic-hate-crimes" class="section level3">
<h3>Detrending Anti-Hispanic Hate Crimes</h3>
<pre class="r"><code>lm_antihispanic &lt;- lm(hatecrimes~ year_fct + quarter_fct, data = qt_hate_hispanic)

summary(lm_antihispanic)</code></pre>
<pre><code>
Call:
lm(formula = hatecrimes ~ year_fct + quarter_fct, data = qt_hate_hispanic)

Residuals:
    Min      1Q  Median      3Q     Max 
-30.170  -8.321  -0.009   6.830  58.902 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)    45.920      7.944   5.781 1.34e-07 ***
year_fct1992   35.000     10.677   3.278 0.001540 ** 
year_fct1993   46.500     10.677   4.355 3.86e-05 ***
year_fct1994   27.250     10.677   2.552 0.012579 *  
year_fct1995   71.250     10.677   6.674 2.86e-09 ***
year_fct1996   83.250     10.677   7.797 1.88e-11 ***
year_fct1997   65.000     10.677   6.088 3.63e-08 ***
year_fct1998   62.750     10.677   5.877 8.90e-08 ***
year_fct1999   58.750     10.677   5.503 4.26e-07 ***
year_fct2000   81.500     10.677   7.634 3.94e-11 ***
year_fct2001   91.500     10.677   8.570 5.62e-13 ***
year_fct2002   62.500     10.677   5.854 9.83e-08 ***
year_fct2003   48.750     10.677   4.566 1.75e-05 ***
year_fct2004   61.000     10.677   5.713 1.77e-07 ***
year_fct2005   72.750     10.677   6.814 1.54e-09 ***
year_fct2006   86.250     10.677   8.078 5.26e-12 ***
year_fct2007   91.000     10.677   8.523 6.96e-13 ***
year_fct2008   82.500     10.677   7.727 2.58e-11 ***
year_fct2009   63.750     10.677   5.971 5.98e-08 ***
year_fct2010   75.750     10.677   7.095 4.42e-10 ***
year_fct2011   43.500     10.677   4.074 0.000107 ***
year_fct2012   49.500     10.677   4.636 1.34e-05 ***
year_fct2013   24.250     10.677   2.271 0.025779 *  
year_fct2014   17.000     10.677   1.592 0.115217    
year_fct2015   17.000     10.677   1.592 0.115217    
year_fct2016   29.000     10.677   2.716 0.008070 ** 
year_fct2017   49.750     10.677   4.660 1.23e-05 ***
year_fct2018   67.250     10.677   6.299 1.46e-08 ***
quarter_fct2   22.929      4.035   5.682 2.02e-07 ***
quarter_fct3   27.893      4.035   6.912 9.96e-10 ***
quarter_fct4   -3.500      4.035  -0.867 0.388319    
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 15.1 on 81 degrees of freedom
Multiple R-squared:  0.8242,    Adjusted R-squared:  0.7591 
F-statistic: 12.66 on 30 and 81 DF,  p-value: &lt; 2.2e-16</code></pre>
<pre class="r"><code>qt_hate_hispanic$predictions= predict(lm_antihispanic, qt_hate_hispanic)
qt_hate_hispanic$residuals= resid(lm_antihispanic)
qt_hate_hispanic$mean= mean(qt_hate_hispanic$hatecrimes)
qt_hate_hispanic$hatedetrend=qt_hate_hispanic$residuals+qt_hate_hispanic$mean


legend_points_hispanic_det &lt;-  legend_points_hispanic %&gt;% 
  left_join(qt_hate_hispanic, by=&quot;quarter&quot;) %&gt;% 
  arrange(quarter_date)

legend_points_hispanic_det</code></pre>
<pre><code># A tibble: 4 x 15
  quarter_date labels quarter quarter_fct.x year.x year_fct.x hatecrimes.x
  &lt;date&gt;       &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;fct&gt;             &lt;int&gt;
1 2001-07-01   9/11     2001. 3               2001 2001                180
2 2008-10-01   Obama…   2008. 4               2008 2008                117
3 2012-10-01   Obama…   2012. 4               2012 2012                 83
4 2016-10-01   Trump…   2016. 4               2016 2016                106
# … with 8 more variables: quarter_fct.y &lt;fct&gt;, year.y &lt;dbl&gt;,
#   year_fct.y &lt;fct&gt;, hatecrimes.y &lt;int&gt;, predictions &lt;dbl&gt;,
#   residuals &lt;dbl&gt;, mean &lt;dbl&gt;, hatedetrend &lt;dbl&gt;</code></pre>
<pre class="r"><code>qt_hate_hispanic %&gt;% 
  mutate(quarter_date=dmy(paste( &quot;01&quot;, as.character( (as.numeric(quarter_fct)*3 -2) ), as.character(year_fct),sep = &quot;-&quot; ))) %&gt;% 
  mutate(hatedetrend= ifelse(hatedetrend&lt;0, 0, hatedetrend)) %&gt;% 
  ggplot(aes(x=quarter_date, y=hatedetrend))+
  geom_line(size=0.8)+
  scale_y_continuous(labels = comma, limits = c(75, 200), breaks = seq(75,200,25), minor_breaks = NULL)+
  scale_x_date(breaks = seq.Date(dmy(&quot;01-01-1991&quot;), dmy(&quot;31-12-2018&quot;), by= &quot;2 year&quot;), 
               date_labels = &quot;%Y-%m&quot;, 
               limits = c(lubridate::dmy(&quot;01-01-1991&quot;), lubridate::dmy(&quot;31-12-2018&quot;)),
               expand=c(0,0))+
  hrbrthemes::theme_ipsum_rc()+
  labs(title = &quot;Detrended Quarterly Anti-Hispanic Hate Crime in the US, 1991-2018&quot;,
       y=&quot;Number of Anti-Hispanic Hate Crime Incidents (Detrended)&quot;,
       x= &quot;Date (Quarter)&quot;,
       subtitle = &quot;Source: FBI Hate Crime Statistics&quot;,
       caption = &quot;HateLab, by @SefaOzalp, 2020&quot;
       )+
  theme(plot.caption = element_text(size = 12))+
  theme(axis.text.x = element_text(angle=45, hjust = 1))+
  geom_point(data=legend_points_hispanic_det, aes(x=quarter_date, y= hatedetrend , shape=factor(labels)), size=4,colour=&quot;grey50&quot; )+
  theme(legend.position=&quot;bottom&quot;)+
  scale_shape_manual(values=c( 13,15, 17,18),
                     name = NULL)+
  NULL  </code></pre>
<p><img src="figure/fbi_hate_crimes_quarterly.rmd/antihispanic_detrended-1.png" width="5000" style="display: block; margin: auto;" /></p>
<p>
<button type="button" class="btn btn-default btn-xs btn-workflowr btn-workflowr-fig" data-toggle="collapse" data-target="#fig-antihispanic_detrended-1">
Past versions of antihispanic_detrended-1.png
</button>
</p>
<div id="fig-antihispanic_detrended-1" class="collapse">
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/76c47fd9a8f85dde5d4f4cf1cd037f0c3e296529/docs/figure/fbi_hate_crimes_quarterly.rmd/antihispanic_detrended-1.png" target="_blank">76c47fd</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-07-01
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/232a1162a9eb8b6224e163328addbc27203e3eb4/docs/figure/fbi_hate_crimes_quarterly.rmd/antihispanic_detrended-1.png" target="_blank">232a116</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-02-26
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/32106bf34a38de1465139c3850240bdaac4485e2/docs/figure/fbi_hate_crimes_quarterly.rmd/antihispanic_detrended-1.png" target="_blank">32106bf</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-02-26
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="anti-black-hate-crimes-since-1991." class="section level2">
<h2>Anti-Black Hate Crimes Since 1991.</h2>
<pre class="r"><code>qt_hate_black &lt;- ucr_hate_small %&gt;% 
  filter(bias_motivation_offense_1 == &quot;anti-black&quot;) %&gt;% 
  select(contains(&quot;year&quot;), contains(&quot;date&quot;)) %&gt;% 
  mutate(date= lubridate::ymd(date), quarter= lubridate::quarter(date,with_year = T), 
         quarter_fct= as.factor(lubridate::quarter(date,with_year = F)), year_fct=as.factor(year)) %&gt;% 
  count(quarter, quarter_fct, year, year_fct) %&gt;% 
  filter(!is.na(quarter)) %&gt;% 
  rename(hatecrimes=n)</code></pre>
<div id="quarterly-aggregated-anti-black-hate-crimes-plot" class="section level3">
<h3>Quarterly Aggregated Anti-black Hate Crimes Plot</h3>
<pre class="r"><code>legend_points_black &lt;-  tibble(quarter_date= dmy(c(&quot;01-10-2016&quot;, &quot;01-10-2012&quot;, &quot;01-10-2008&quot;, &quot;01-07-2001&quot;)),
                         labels= c(&quot;Trump 2016&quot;, &quot;Obama 2012&quot;, &quot;Obama 2008&quot;, &quot;9/11&quot;)) %&gt;%
  mutate(quarter= lubridate::quarter(quarter_date,with_year = T),  quarter_fct= as.factor(lubridate::quarter(quarter_date,with_year = F))) %&gt;% 
  left_join(qt_hate_black) %&gt;% 
  arrange(quarter_date)</code></pre>
<pre><code>Joining, by = c(&quot;quarter&quot;, &quot;quarter_fct&quot;)</code></pre>
<pre><code>Warning: Column `quarter_fct` joining factors with different levels,
coercing to character vector</code></pre>
<pre class="r"><code>qt_hate_black %&gt;% 
  mutate(quarter_date=dmy(paste( &quot;01&quot;, as.character( (as.numeric(quarter_fct)*3 -2) ), as.character(year_fct),sep = &quot;-&quot; ))) %&gt;% 
  ggplot(aes(x=quarter_date, y=hatecrimes))+
  geom_line(size=0.8)+
  scale_x_date(breaks = seq.Date(dmy(&quot;01-01-1991&quot;), dmy(&quot;31-12-2018&quot;), by= &quot;2 year&quot;), 
               date_labels = &quot;%Y-%m&quot;, 
               limits = c(lubridate::dmy(&quot;01-01-1991&quot;), lubridate::dmy(&quot;31-12-2018&quot;)),
               expand=c(0,0))+
  hrbrthemes::theme_ipsum_rc()+
  scale_y_continuous(label=comma, breaks = seq(0,1100, 100), limits = c(300,1100), minor_breaks = NULL)+
  labs(title = &quot;Quarterly Aggregated Anti-Black Hate Crime Incidents in the US, 1991-2018&quot;,
       y=&quot;Number of Anti-Black Hate Crime Incidents&quot;,
       subtitle = &quot;Source: FBI Hate Crime Statistics&quot;,
       caption = &quot;HateLab, by @SefaOzalp, 2020&quot;
       )+
  theme(plot.caption = element_text(size = 12))+
  theme(axis.text.x = element_text(angle=45, hjust = 1))+
  geom_point(data=legend_points_black, aes(x=quarter_date, y= hatecrimes , shape=factor(labels)), size=4,colour=&quot;grey50&quot; )+
  theme(legend.position=&quot;bottom&quot;)+
  scale_shape_manual(values=c( 13,15, 17,18),
                     name = NULL)+
  NULL</code></pre>
<p><img src="figure/fbi_hate_crimes_quarterly.rmd/anti-black_incidents-1.png" width="5000" style="display: block; margin: auto;" /></p>
<p>
<button type="button" class="btn btn-default btn-xs btn-workflowr btn-workflowr-fig" data-toggle="collapse" data-target="#fig-anti-black_incidents-1">
Past versions of anti-black_incidents-1.png
</button>
</p>
<div id="fig-anti-black_incidents-1" class="collapse">
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/76c47fd9a8f85dde5d4f4cf1cd037f0c3e296529/docs/figure/fbi_hate_crimes_quarterly.rmd/anti-black_incidents-1.png" target="_blank">76c47fd</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-07-01
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/e6cf48918ba7e4203b513e4b6bbd1234afaa11ea/docs/figure/fbi_hate_crimes_quarterly.rmd/anti-black_incidents-1.png" target="_blank">e6cf489</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-06-17
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/cd25ee057eda4fbeac010350b8d7d3d2acc7012b/docs/figure/fbi_hate_crimes_quarterly.rmd/anti-black_incidents-1.png" target="_blank">cd25ee0</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-06-17
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="detrending-anti-black-hate-crimes" class="section level3">
<h3>Detrending Anti-Black Hate Crimes</h3>
<pre class="r"><code>lm_antiblack &lt;- lm(hatecrimes~ year_fct + quarter_fct, data = qt_hate_black)

summary(lm_antiblack)</code></pre>
<pre><code>
Call:
lm(formula = hatecrimes ~ year_fct + quarter_fct, data = qt_hate_black)

Residuals:
     Min       1Q   Median       3Q      Max 
-109.179  -22.214    1.679   18.357  108.321 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)   361.964     22.948  15.773  &lt; 2e-16 ***
year_fct1992  170.750     30.843   5.536 3.71e-07 ***
year_fct1993  298.000     30.843   9.662 3.92e-15 ***
year_fct1994  137.250     30.843   4.450 2.71e-05 ***
year_fct1995  340.250     30.843  11.032  &lt; 2e-16 ***
year_fct1996  511.500     30.843  16.584  &lt; 2e-16 ***
year_fct1997  372.750     30.843  12.086  &lt; 2e-16 ***
year_fct1998  318.250     30.843  10.318  &lt; 2e-16 ***
year_fct1999  332.750     30.843  10.789  &lt; 2e-16 ***
year_fct2000  314.500     30.843  10.197 3.49e-16 ***
year_fct2001  317.750     30.843  10.302  &lt; 2e-16 ***
year_fct2002  214.500     30.843   6.955 8.25e-10 ***
year_fct2003  230.250     30.843   7.465 8.41e-11 ***
year_fct2004  276.500     30.843   8.965 9.32e-14 ***
year_fct2005  250.500     30.843   8.122 4.32e-12 ***
year_fct2006  253.000     30.843   8.203 2.99e-12 ***
year_fct2007  257.500     30.843   8.349 1.54e-12 ***
year_fct2008  312.000     30.843  10.116 5.03e-16 ***
year_fct2009  167.000     30.843   5.415 6.13e-07 ***
year_fct2010  143.000     30.843   4.636 1.34e-05 ***
year_fct2011  111.750     30.843   3.623 0.000506 ***
year_fct2012  107.750     30.843   3.494 0.000775 ***
year_fct2013   56.000     30.843   1.816 0.073122 .  
year_fct2014    0.250     30.843   0.008 0.993553    
year_fct2015   32.750     30.843   1.062 0.291464    
year_fct2016   32.250     30.843   1.046 0.298843    
year_fct2017  104.000     30.843   3.372 0.001146 ** 
year_fct2018   81.250     30.843   2.634 0.010097 *  
quarter_fct2   85.071     11.657   7.298 1.79e-10 ***
quarter_fct3  102.607     11.657   8.802 1.96e-13 ***
quarter_fct4   -6.536     11.657  -0.561 0.576586    
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 43.62 on 81 degrees of freedom
Multiple R-squared:  0.9304,    Adjusted R-squared:  0.9046 
F-statistic: 36.09 on 30 and 81 DF,  p-value: &lt; 2.2e-16</code></pre>
<pre class="r"><code>qt_hate_black$predictions= predict(lm_antiblack, qt_hate_black)
qt_hate_black$residuals= resid(lm_antiblack)
qt_hate_black$mean= mean(qt_hate_black$hatecrimes)
qt_hate_black$hatedetrend=qt_hate_black$residuals+qt_hate_black$mean


legend_points_black_det &lt;-  legend_points_black %&gt;% 
  left_join(qt_hate_black, by=&quot;quarter&quot;) %&gt;% 
  arrange(quarter_date)

legend_points_black_det</code></pre>
<pre><code># A tibble: 4 x 15
  quarter_date labels quarter quarter_fct.x year.x year_fct.x hatecrimes.x
  &lt;date&gt;       &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;fct&gt;             &lt;int&gt;
1 2001-07-01   9/11     2001. 3               2001 2001                760
2 2008-10-01   Obama…   2008. 4               2008 2008                698
3 2012-10-01   Obama…   2012. 4               2012 2012                398
4 2016-10-01   Trump…   2016. 4               2016 2016                496
# … with 8 more variables: quarter_fct.y &lt;fct&gt;, year.y &lt;dbl&gt;,
#   year_fct.y &lt;fct&gt;, hatecrimes.y &lt;int&gt;, predictions &lt;dbl&gt;,
#   residuals &lt;dbl&gt;, mean &lt;dbl&gt;, hatedetrend &lt;dbl&gt;</code></pre>
<pre class="r"><code>qt_hate_black %&gt;% 
  mutate(quarter_date=dmy(paste( &quot;01&quot;, as.character( (as.numeric(quarter_fct)*3 -2) ), as.character(year_fct),sep = &quot;-&quot; ))) %&gt;% 
  mutate(hatedetrend= ifelse(hatedetrend&lt;0, 0, hatedetrend)) %&gt;% 
  ggplot(aes(x=quarter_date, y=hatedetrend))+
  geom_line(size=0.8)+
  # scale_y_continuous(labels = comma, limits = c(1250, 2750), breaks = seq(1500,3500,250), minor_breaks = NULL)+
  scale_x_date(breaks = seq.Date(dmy(&quot;01-01-1991&quot;), dmy(&quot;31-12-2018&quot;), by= &quot;2 year&quot;), 
               date_labels = &quot;%Y-%m&quot;, 
               limits = c(lubridate::dmy(&quot;01-01-1991&quot;), lubridate::dmy(&quot;31-12-2018&quot;)),
               expand=c(0,0))+
  hrbrthemes::theme_ipsum_rc()+
  labs(title = &quot;Detrended Quarterly Anti-Black Hate Crime in the US, 1991-2018&quot;,
       y=&quot;Number of Anti-Black Hate Crime Incidents (Detrended)&quot;,
       x= &quot;Date (Quarter)&quot;,
       subtitle = &quot;Source: FBI Hate Crime Statistics&quot;,
       caption = &quot;HateLab, by @SefaOzalp, 2020&quot;
       )+
  theme(plot.caption = element_text(size = 12))+
  theme(axis.text.x = element_text(angle=45, hjust = 1))+
  geom_point(data=legend_points_black_det, aes(x=quarter_date, y= hatedetrend , shape=factor(labels)), size=4,colour=&quot;grey50&quot; )+
  theme(legend.position=&quot;bottom&quot;)+
  scale_shape_manual(values=c( 13,15, 17,18),
                     name = NULL)+
  NULL  </code></pre>
<p><img src="figure/fbi_hate_crimes_quarterly.rmd/antiblack_detrended_plot-1.png" width="5000" style="display: block; margin: auto;" /></p>
<p>
<button type="button" class="btn btn-default btn-xs btn-workflowr btn-workflowr-fig" data-toggle="collapse" data-target="#fig-antiblack_detrended_plot-1">
Past versions of antiblack_detrended_plot-1.png
</button>
</p>
<div id="fig-antiblack_detrended_plot-1" class="collapse">
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/76c47fd9a8f85dde5d4f4cf1cd037f0c3e296529/docs/figure/fbi_hate_crimes_quarterly.rmd/antiblack_detrended_plot-1.png" target="_blank">76c47fd</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-07-01
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/e6cf48918ba7e4203b513e4b6bbd1234afaa11ea/docs/figure/fbi_hate_crimes_quarterly.rmd/antiblack_detrended_plot-1.png" target="_blank">e6cf489</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-06-17
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/cd25ee057eda4fbeac010350b8d7d3d2acc7012b/docs/figure/fbi_hate_crimes_quarterly.rmd/antiblack_detrended_plot-1.png" target="_blank">cd25ee0</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-06-17
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="anti-lgbti-hate-crimes-since-1991" class="section level2">
<h2>Anti-LGBTI Hate Crimes Since 1991</h2>
<pre class="r"><code>qt_hate_LGBTI &lt;- ucr_hate_small %&gt;% 
  filter(bias_motivation_offense_1 %in% c(&quot;anti-male homosexual (gay)&quot;,&quot;anti-female homosexual (lesbian)&quot;, &quot;anti-homosexual (gay and lesbian)&quot;, &quot;anti-lesbian, gay, bisexual, or transgender, mixed group (lgbt)&quot;, &quot;anti-bisexual&quot;, &quot;anti-transgender&quot;,&quot;anti-gender non-conforming&quot; ) ) %&gt;% 
  select(contains(&quot;year&quot;), contains(&quot;date&quot;)) %&gt;% 
  mutate(date= lubridate::ymd(date), quarter= lubridate::quarter(date,with_year = T), 
         quarter_fct= as.factor(lubridate::quarter(date,with_year = F)), year_fct=as.factor(year)) %&gt;% 
  count(quarter, quarter_fct, year, year_fct) %&gt;% 
  filter(!is.na(quarter)) %&gt;% 
  rename(hatecrimes=n)</code></pre>
<div id="quarterly-aggregated-anti-lgbti-hate-crimes-plot" class="section level3">
<h3>Quarterly Aggregated Anti-LGBTI Hate Crimes Plot</h3>
<pre class="r"><code>legend_points_LGBTI &lt;-  tibble(quarter_date= dmy(c(&quot;01-10-2016&quot;, &quot;01-10-2012&quot;, &quot;01-10-2008&quot;, &quot;01-07-2001&quot;)),
                         labels= c(&quot;Trump 2016&quot;, &quot;Obama 2012&quot;, &quot;Obama 2008&quot;, &quot;9/11&quot;)) %&gt;%
  mutate(quarter= lubridate::quarter(quarter_date,with_year = T),  quarter_fct= as.factor(lubridate::quarter(quarter_date,with_year = F))) %&gt;% 
  left_join(qt_hate_LGBTI) %&gt;% 
  arrange(quarter_date)</code></pre>
<pre><code>Joining, by = c(&quot;quarter&quot;, &quot;quarter_fct&quot;)</code></pre>
<pre><code>Warning: Column `quarter_fct` joining factors with different levels,
coercing to character vector</code></pre>
<pre class="r"><code>qt_hate_LGBTI %&gt;% 
  mutate(quarter_date=dmy(paste( &quot;01&quot;, as.character( (as.numeric(quarter_fct)*3 -2) ), as.character(year_fct),sep = &quot;-&quot; ))) %&gt;% 
  ggplot(aes(x=quarter_date, y=hatecrimes))+
  geom_line(size=0.8)+
  scale_x_date(breaks = seq.Date(dmy(&quot;01-01-1991&quot;), dmy(&quot;31-12-2018&quot;), by= &quot;2 year&quot;), 
               date_labels = &quot;%Y-%m&quot;, 
               limits = c(lubridate::dmy(&quot;01-01-1991&quot;), lubridate::dmy(&quot;31-12-2018&quot;)),
               expand=c(0,0))+
  hrbrthemes::theme_ipsum_rc()+
  # scale_y_continuous(label=comma, breaks = seq(0,1100, 100), limits = c(300,1100), minor_breaks = NULL)+
  labs(title = &quot;Quarterly Aggregated Anti-LGBTI Hate Crime Incidents in the US, 1991-2018&quot;,
       y=&quot;Number of Anti-LGBTI Hate Crime Incidents&quot;,
       subtitle = &quot;Source: FBI Hate Crime Statistics&quot;,
       caption = &quot;HateLab, by @SefaOzalp, 2020&quot;
       )+
  theme(plot.caption = element_text(size = 12))+
  theme(axis.text.x = element_text(angle=45, hjust = 1))+
  geom_point(data=legend_points_LGBTI, aes(x=quarter_date, y= hatecrimes , shape=factor(labels)), size=4,colour=&quot;grey50&quot; )+
  theme(legend.position=&quot;bottom&quot;)+
  scale_shape_manual(values=c( 13,15, 17,18),
                     name = NULL)+
  NULL</code></pre>
<p><img src="figure/fbi_hate_crimes_quarterly.rmd/anti-LGBTI_incidents-1.png" width="5000" style="display: block; margin: auto;" /></p>
<p>
<button type="button" class="btn btn-default btn-xs btn-workflowr btn-workflowr-fig" data-toggle="collapse" data-target="#fig-anti-LGBTI_incidents-1">
Past versions of anti-LGBTI_incidents-1.png
</button>
</p>
<div id="fig-anti-LGBTI_incidents-1" class="collapse">
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/76c47fd9a8f85dde5d4f4cf1cd037f0c3e296529/docs/figure/fbi_hate_crimes_quarterly.rmd/anti-LGBTI_incidents-1.png" target="_blank">76c47fd</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-07-01
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/b0ef67a5009fe47b6a05fdb0fc0eec1201c61aa7/docs/figure/fbi_hate_crimes_quarterly.rmd/anti-LGBTI_incidents-1.png" target="_blank">b0ef67a</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-06-17
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="detrending-anti-lgbti-hate-crimes" class="section level3">
<h3>Detrending Anti-LGBTI Hate Crimes</h3>
<pre class="r"><code>lm_antiLGBTI &lt;- lm(hatecrimes~ year_fct + quarter_fct, data = qt_hate_LGBTI)

summary(lm_antiLGBTI)</code></pre>
<pre><code>
Call:
lm(formula = hatecrimes ~ year_fct + quarter_fct, data = qt_hate_LGBTI)

Residuals:
    Min      1Q  Median      3Q     Max 
-45.437 -14.679  -2.366  12.821  61.884 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)    71.937     11.914   6.038 4.49e-08 ***
year_fct1992   88.500     16.013   5.527 3.86e-07 ***
year_fct1993  107.250     16.013   6.698 2.57e-09 ***
year_fct1994   67.250     16.013   4.200 6.82e-05 ***
year_fct1995  150.000     16.013   9.368 1.49e-14 ***
year_fct1996  149.500     16.013   9.336 1.72e-14 ***
year_fct1997  172.250     16.013  10.757  &lt; 2e-16 ***
year_fct1998  211.250     16.013  13.193  &lt; 2e-16 ***
year_fct1999  225.250     16.013  14.067  &lt; 2e-16 ***
year_fct2000  218.750     16.013  13.661  &lt; 2e-16 ***
year_fct2001  243.250     16.013  15.191  &lt; 2e-16 ***
year_fct2002  208.000     16.013  12.990  &lt; 2e-16 ***
year_fct2003  205.500     16.013  12.834  &lt; 2e-16 ***
year_fct2004  190.500     16.013  11.897  &lt; 2e-16 ***
year_fct2005  148.500     16.013   9.274 2.28e-14 ***
year_fct2006  191.500     16.013  11.959  &lt; 2e-16 ***
year_fct2007  210.000     16.013  13.115  &lt; 2e-16 ***
year_fct2008  215.500     16.013  13.458  &lt; 2e-16 ***
year_fct2009  201.000     16.013  12.553  &lt; 2e-16 ***
year_fct2010  213.500     16.013  13.333  &lt; 2e-16 ***
year_fct2011  219.500     16.013  13.708  &lt; 2e-16 ***
year_fct2012  218.500     16.013  13.645  &lt; 2e-16 ***
year_fct2013  210.750     16.013  13.161  &lt; 2e-16 ***
year_fct2014  173.750     16.013  10.851  &lt; 2e-16 ***
year_fct2015  187.750     16.013  11.725  &lt; 2e-16 ***
year_fct2016  197.500     16.013  12.334  &lt; 2e-16 ***
year_fct2017  205.000     16.013  12.802  &lt; 2e-16 ***
year_fct2018  246.750     16.013  15.410  &lt; 2e-16 ***
quarter_fct2   50.107      6.052   8.279 2.12e-12 ***
quarter_fct3   57.214      6.052   9.453 1.01e-14 ***
quarter_fct4    7.929      6.052   1.310    0.194    
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 22.65 on 81 degrees of freedom
Multiple R-squared:  0.9082,    Adjusted R-squared:  0.8742 
F-statistic:  26.7 on 30 and 81 DF,  p-value: &lt; 2.2e-16</code></pre>
<pre class="r"><code>qt_hate_LGBTI$predictions= predict(lm_antiLGBTI, qt_hate_LGBTI)
qt_hate_LGBTI$residuals= resid(lm_antiLGBTI)
qt_hate_LGBTI$mean= mean(qt_hate_LGBTI$hatecrimes)
qt_hate_LGBTI$hatedetrend=qt_hate_LGBTI$residuals+qt_hate_LGBTI$mean


legend_points_LGBTI_det &lt;-  legend_points_LGBTI %&gt;% 
  left_join(qt_hate_LGBTI, by=&quot;quarter&quot;) %&gt;% 
  arrange(quarter_date)

legend_points_LGBTI_det</code></pre>
<pre><code># A tibble: 4 x 15
  quarter_date labels quarter quarter_fct.x year.x year_fct.x hatecrimes.x
  &lt;date&gt;       &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;fct&gt;             &lt;int&gt;
1 2001-07-01   9/11     2001. 3               2001 2001                380
2 2008-10-01   Obama…   2008. 4               2008 2008                338
3 2012-10-01   Obama…   2012. 4               2012 2012                272
4 2016-10-01   Trump…   2016. 4               2016 2016                288
# … with 8 more variables: quarter_fct.y &lt;fct&gt;, year.y &lt;dbl&gt;,
#   year_fct.y &lt;fct&gt;, hatecrimes.y &lt;int&gt;, predictions &lt;dbl&gt;,
#   residuals &lt;dbl&gt;, mean &lt;dbl&gt;, hatedetrend &lt;dbl&gt;</code></pre>
<pre class="r"><code>qt_hate_LGBTI %&gt;% 
  mutate(quarter_date=dmy(paste( &quot;01&quot;, as.character( (as.numeric(quarter_fct)*3 -2) ), as.character(year_fct),sep = &quot;-&quot; ))) %&gt;% 
  mutate(hatedetrend= ifelse(hatedetrend&lt;0, 0, hatedetrend)) %&gt;% 
  ggplot(aes(x=quarter_date, y=hatedetrend))+
  geom_line(size=0.8)+
  # scale_y_continuous(labels = comma, limits = c(1250, 2750), breaks = seq(1500,3500,250), minor_breaks = NULL)+
  scale_x_date(breaks = seq.Date(dmy(&quot;01-01-1991&quot;), dmy(&quot;31-12-2018&quot;), by= &quot;2 year&quot;), 
               date_labels = &quot;%Y-%m&quot;, 
               limits = c(lubridate::dmy(&quot;01-01-1991&quot;), lubridate::dmy(&quot;31-12-2018&quot;)),
               expand=c(0,0))+
  hrbrthemes::theme_ipsum_rc()+
  labs(title = &quot;Detrended Quarterly Anti-LGBTI Hate Crime in the US, 1991-2018&quot;,
       y=&quot;Number of Anti-LGBTI Hate Crime Incidents (Detrended)&quot;,
       x= &quot;Date (Quarter)&quot;,
       subtitle = &quot;Source: FBI Hate Crime Statistics&quot;,
       caption = &quot;HateLab, by @SefaOzalp, 2020&quot;
       )+
  theme(plot.caption = element_text(size = 12))+
  theme(axis.text.x = element_text(angle=45, hjust = 1))+
  geom_point(data=legend_points_LGBTI_det, aes(x=quarter_date, y= hatedetrend , shape=factor(labels)), size=4,colour=&quot;grey50&quot; )+
  theme(legend.position=&quot;bottom&quot;)+
  scale_shape_manual(values=c( 13,15, 17,18),
                     name = NULL)+
  NULL  </code></pre>
<p><img src="figure/fbi_hate_crimes_quarterly.rmd/antiLGBTI_detrended_plot-1.png" width="5000" style="display: block; margin: auto;" /></p>
<p>
<button type="button" class="btn btn-default btn-xs btn-workflowr btn-workflowr-fig" data-toggle="collapse" data-target="#fig-antiLGBTI_detrended_plot-1">
Past versions of antiLGBTI_detrended_plot-1.png
</button>
</p>
<div id="fig-antiLGBTI_detrended_plot-1" class="collapse">
<div class="table-responsive">
<table class="table table-condensed table-hover">
<thead>
<tr>
<th>
Version
</th>
<th>
Author
</th>
<th>
Date
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/76c47fd9a8f85dde5d4f4cf1cd037f0c3e296529/docs/figure/fbi_hate_crimes_quarterly.rmd/antiLGBTI_detrended_plot-1.png" target="_blank">76c47fd</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-07-01
</td>
</tr>
<tr>
<td>
<a href="https://github.com/sefabey/fbi_hate_crimes_data_viz/blob/b0ef67a5009fe47b6a05fdb0fc0eec1201c61aa7/docs/figure/fbi_hate_crimes_quarterly.rmd/antiLGBTI_detrended_plot-1.png" target="_blank">b0ef67a</a>
</td>
<td>
Sefa Ozalp
</td>
<td>
2020-06-17
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div id="the-effect-trumps-election-on-anti-muslim-anti-hispanic-and-anti-black-and-anti-lgbti-hate-crimes" class="section level1">
<h1>The Effect Trumps Election on Anti-Muslim, Anti-Hispanic, and anti-Black and anti-LGBTI Hate Crimes</h1>
<div id="define-functions" class="section level3">
<h3>Define Functions</h3>
<pre class="r"><code>qt_hate_muslim %&gt;% 
  filter( year==2016&amp;quarter_fct%in%c(3,4) | year==2015&amp;quarter_fct%in%c(3,4) )%&gt;% 
  select(quarter, hatecrimes,year) %&gt;% 
  group_by(year) %&gt;% 
  summarise(sum_hatecrimes=sum(hatecrimes)) %&gt;% 
  pivot_wider(names_from = year, values_from = sum_hatecrimes, names_prefix = &quot;quarters_&quot;) %&gt;% 
  summarise(percentage_change=round(quarters_2016/quarters_2015*100-100, 3))</code></pre>
<pre><code># A tibble: 1 x 1
  percentage_change
              &lt;dbl&gt;
1              8.29</code></pre>
<pre class="r"><code>year_change &lt;- function(data, quarters=c(3,4)){
  dt &lt;- data %&gt;% 
    filter( year==2016&amp;quarter_fct%in%quarters | year==2015&amp;quarter_fct%in%quarters )%&gt;% 
  select(quarter, hatecrimes,year) %&gt;% 
  group_by(year) %&gt;% 
  summarise(sum_hatecrimes=sum(hatecrimes)) %&gt;% 
  pivot_wider(names_from = year, values_from = sum_hatecrimes, names_prefix = &quot;quarters_&quot;) %&gt;% 
  summarise(percentage_change=round(quarters_2016/quarters_2015*100-100, 3))
  
  message &lt;- paste(&quot;The change in mean&quot;, str_replace(string =  deparse(substitute(data)), #to use arg name as char vertor using non-standard evaluation
                                           pattern = &quot;qt_hate_&quot;,
                                           replacement = &quot;anti-&quot;), 
              &quot;hate crimes between quarter(s)&quot;,
              paste(quarters, collapse =&quot;,&quot;), &quot;of 2015 and quarter(s)&quot;, paste(quarters, collapse =&quot;,&quot;) ,&quot;of 2016 is&quot;, dt, &quot;%.\n&quot; ) 
  cat(message)
}

# year_change(qt_hate_muslim, quarters = c(2,3,4))
# map(list(4,c(3,4), c(2,3,4), c(1,2,3,4) ), ~year_change(qt_hate_LGBTI, quarters=.x) )</code></pre>
<pre class="r"><code>qt_hate_muslim</code></pre>
<pre><code># A tibble: 112 x 9
   quarter quarter_fct  year year_fct hatecrimes predictions residuals
     &lt;dbl&gt; &lt;fct&gt;       &lt;dbl&gt; &lt;fct&gt;         &lt;int&gt;       &lt;dbl&gt;     &lt;dbl&gt;
 1   1991. 1            1991 1991             45       12.5      32.5 
 2   1991. 2            1991 1991             12       16.9      -4.86
 3   1991. 3            1991 1991             14       33.9     -19.9 
 4   1991. 4            1991 1991             12       19.8      -7.79
 5   1992. 1            1992 1992             19       10.5       8.54
 6   1992. 2            1992 1992             12       14.9      -2.86
 7   1992. 3            1992 1992             22       31.9      -9.89
 8   1992. 4            1992 1992             22       17.8       4.21
 9   1993. 1            1993 1993             15        8.46      6.54
10   1993. 2            1993 1993             19       12.9       6.14
# … with 102 more rows, and 2 more variables: mean &lt;dbl&gt;,
#   hatedetrend &lt;dbl&gt;</code></pre>
<pre class="r"><code>#9 month percentage change 
qt_hate_muslim %&gt;% 
  filter(year&gt;=2016) %&gt;% 
  mutate(after_trump= ifelse( ( year==2016 &amp; as.numeric(quarter_fct)&lt;4 ), 0, 1 )) %&gt;% 
  select(after_trump, everything()) %&gt;%
  slice(1:6) %&gt;% 
  group_by(after_trump) %&gt;% 
  summarise(mean_hatecrimes=mean(hatecrimes)) %&gt;% 
  pivot_wider(names_from = after_trump, values_from = mean_hatecrimes, names_prefix = &quot;after_trump_&quot;) %&gt;% 
  summarise(percentage_change=after_trump_1/after_trump_0*100)</code></pre>
<pre><code># A tibble: 1 x 1
  percentage_change
              &lt;dbl&gt;
1              125.</code></pre>
<pre class="r"><code>calc_perc_change &lt;- function(data, n){
  dt &lt;- data %&gt;% 
    mutate(quarter_date=dmy(paste( &quot;01&quot;, as.character( (as.numeric(quarter_fct)*3 -2) ), as.character(year_fct),sep = &quot;-&quot; ))) %&gt;% 
    mutate(after_trump= ifelse(  quarter_date&gt;=lubridate::ymd(&quot;2016-10-01&quot;), 1, 0 )) %&gt;% select(after_trump, everything())

  index_trump &lt;-  which(dt$after_trump==1)[1]
  
  dt_sliced &lt;-  dt %&gt;% 
    slice((index_trump-(n+1)):(index_trump+n))
  
  before_mean= mean(dt_sliced[dt_sliced$after_trump==0,]$hatecrimes)
  after_mean= mean(dt_sliced[dt_sliced$after_trump==1,]$hatecrimes)

  message &lt;- paste(&quot;The change in mean&quot;, str_replace(string =  deparse(substitute(data)), #to use arg name as char vertor using non-standard evaluation
                                           pattern = &quot;qt_hate_&quot;,
                                           replacement = &quot;anti-&quot;), 
              &quot;hate crimes&quot;,
              as.character(3*n+3), &quot;months before and after Trump&#39;s election is&quot;,
              round(after_mean/before_mean*100-100, 2), &quot;%.\n&quot; ) 
  cat(message)
}</code></pre>
</div>
<div id="percentage-change-for-anti-muslim-including-anti-arab-hate-crimes" class="section level2">
<h2>Percentage change for anti-Muslim (including anti-Arab) Hate Crimes</h2>
<div id="change-across-quarters-of-2015-and-2016" class="section level3">
<h3>Change across Quarters of 2015 and 2016</h3>
<pre class="r"><code>map(list(4,c(3,4), c(2,3,4), c(1,2,3,4) ), ~year_change(qt_hate_muslim, quarters=.x) )</code></pre>
<pre><code>The change in mean anti-muslim hate crimes between quarter(s) 4 of 2015 and quarter(s) 4 of 2016 is -15.504 %.
The change in mean anti-muslim hate crimes between quarter(s) 3,4 of 2015 and quarter(s) 3,4 of 2016 is 8.287 %.
The change in mean anti-muslim hate crimes between quarter(s) 2,3,4 of 2015 and quarter(s) 2,3,4 of 2016 is 17.213 %.
The change in mean anti-muslim hate crimes between quarter(s) 1,2,3,4 of 2015 and quarter(s) 1,2,3,4 of 2016 is 22.222 %.</code></pre>
<pre><code>[[1]]
NULL

[[2]]
NULL

[[3]]
NULL

[[4]]
NULL</code></pre>
</div>
<div id="cumulative-change-before-and-after-trumps-election-2016q4" class="section level3">
<h3>Cumulative change before and after Trump’s election (2016Q4)</h3>
<pre class="r"><code>map(0:7, ~calc_perc_change(data =qt_hate_muslim, .x ))</code></pre>
<pre><code>The change in mean anti-muslim hate crimes 3 months before and after Trump&#39;s election is 25.29 %.
The change in mean anti-muslim hate crimes 6 months before and after Trump&#39;s election is 24.86 %.
The change in mean anti-muslim hate crimes 9 months before and after Trump&#39;s election is 25.2 %.
The change in mean anti-muslim hate crimes 12 months before and after Trump&#39;s election is 4.7 %.
The change in mean anti-muslim hate crimes 15 months before and after Trump&#39;s election is 11.95 %.
The change in mean anti-muslim hate crimes 18 months before and after Trump&#39;s election is 12.25 %.
The change in mean anti-muslim hate crimes 21 months before and after Trump&#39;s election is 15.79 %.
The change in mean anti-muslim hate crimes 24 months before and after Trump&#39;s election is 19.29 %.</code></pre>
<pre><code>[[1]]
NULL

[[2]]
NULL

[[3]]
NULL

[[4]]
NULL

[[5]]
NULL

[[6]]
NULL

[[7]]
NULL

[[8]]
NULL</code></pre>
</div>
</div>
<div id="percentage-change-for-anti-hispanic-hate-crimes" class="section level2">
<h2>Percentage change for anti-hispanic Hate Crimes</h2>
<div id="change-across-quarters-of-2015-and-2016-1" class="section level3">
<h3>Change across Quarters of 2015 and 2016</h3>
<pre class="r"><code>map(list(4,c(3,4), c(2,3,4), c(1,2,3,4) ), ~year_change(qt_hate_hispanic, quarters=.x) )</code></pre>
<pre><code>The change in mean anti-hispanic hate crimes between quarter(s) 4 of 2015 and quarter(s) 4 of 2016 is 58.209 %.
The change in mean anti-hispanic hate crimes between quarter(s) 3,4 of 2015 and quarter(s) 3,4 of 2016 is 40.136 %.
The change in mean anti-hispanic hate crimes between quarter(s) 2,3,4 of 2015 and quarter(s) 2,3,4 of 2016 is 23.176 %.
The change in mean anti-hispanic hate crimes between quarter(s) 1,2,3,4 of 2015 and quarter(s) 1,2,3,4 of 2016 is 16.054 %.</code></pre>
<pre><code>[[1]]
NULL

[[2]]
NULL

[[3]]
NULL

[[4]]
NULL</code></pre>
</div>
<div id="cumulative-change-before-and-after-trumps-election-2016q4-1" class="section level3">
<h3>Cumulative change before and after Trump’s election (2016Q4)</h3>
<pre class="r"><code>map(0:7, ~calc_perc_change(data =qt_hate_hispanic, .x ))</code></pre>
<pre><code>The change in mean anti-hispanic hate crimes 3 months before and after Trump&#39;s election is 6 %.
The change in mean anti-hispanic hate crimes 6 months before and after Trump&#39;s election is 23.76 %.
The change in mean anti-hispanic hate crimes 9 months before and after Trump&#39;s election is 35.68 %.
The change in mean anti-hispanic hate crimes 12 months before and after Trump&#39;s election is 44.16 %.
The change in mean anti-hispanic hate crimes 15 months before and after Trump&#39;s election is 38.14 %.
The change in mean anti-hispanic hate crimes 18 months before and after Trump&#39;s election is 31.86 %.
The change in mean anti-hispanic hate crimes 21 months before and after Trump&#39;s election is 42.04 %.
The change in mean anti-hispanic hate crimes 24 months before and after Trump&#39;s election is 53.3 %.</code></pre>
<pre><code>[[1]]
NULL

[[2]]
NULL

[[3]]
NULL

[[4]]
NULL

[[5]]
NULL

[[6]]
NULL

[[7]]
NULL

[[8]]
NULL</code></pre>
</div>
</div>
<div id="percentage-change-for-anti-black-hate-crimes" class="section level2">
<h2>Percentage change for anti-black Hate Crimes</h2>
<div id="change-across-quarters-of-2015-and-2016-2" class="section level3">
<h3>Change across Quarters of 2015 and 2016</h3>
<pre class="r"><code>map(list(4,c(3,4), c(2,3,4), c(1,2,3,4) ), ~year_change(qt_hate_black, quarters=.x) )</code></pre>
<pre><code>The change in mean anti-black hate crimes between quarter(s) 4 of 2015 and quarter(s) 4 of 2016 is 28.165 %.
The change in mean anti-black hate crimes between quarter(s) 3,4 of 2015 and quarter(s) 3,4 of 2016 is 10.368 %.
The change in mean anti-black hate crimes between quarter(s) 2,3,4 of 2015 and quarter(s) 2,3,4 of 2016 is 0.719 %.
The change in mean anti-black hate crimes between quarter(s) 1,2,3,4 of 2015 and quarter(s) 1,2,3,4 of 2016 is -0.114 %.</code></pre>
<pre><code>[[1]]
NULL

[[2]]
NULL

[[3]]
NULL

[[4]]
NULL</code></pre>
</div>
<div id="cumulative-change-before-and-after-trumps-election-2016q4-2" class="section level3">
<h3>Cumulative change before and after Trump’s election (2016Q4)</h3>
<pre class="r"><code>map(0:7, ~calc_perc_change(data =qt_hate_black, .x ))</code></pre>
<pre><code>The change in mean anti-black hate crimes 3 months before and after Trump&#39;s election is 0.4 %.
The change in mean anti-black hate crimes 6 months before and after Trump&#39;s election is 0.99 %.
The change in mean anti-black hate crimes 9 months before and after Trump&#39;s election is 17.12 %.
The change in mean anti-black hate crimes 12 months before and after Trump&#39;s election is 23.95 %.
The change in mean anti-black hate crimes 15 months before and after Trump&#39;s election is 17.69 %.
The change in mean anti-black hate crimes 18 months before and after Trump&#39;s election is 11.16 %.
The change in mean anti-black hate crimes 21 months before and after Trump&#39;s election is 14.63 %.
The change in mean anti-black hate crimes 24 months before and after Trump&#39;s election is 16.79 %.</code></pre>
<pre><code>[[1]]
NULL

[[2]]
NULL

[[3]]
NULL

[[4]]
NULL

[[5]]
NULL

[[6]]
NULL

[[7]]
NULL

[[8]]
NULL</code></pre>
</div>
</div>
<div id="percentage-change-for-anti-lgbti-hate-crimes" class="section level2">
<h2>Percentage change for anti-LGBTI Hate Crimes</h2>
<div id="change-across-quarters-of-2015-and-2016-3" class="section level3">
<h3>Change across Quarters of 2015 and 2016</h3>
<pre class="r"><code>map(list(4,c(3,4), c(2,3,4), c(1,2,3,4) ), ~year_change(qt_hate_LGBTI, quarters=.x) )</code></pre>
<pre><code>The change in mean anti-LGBTI hate crimes between quarter(s) 4 of 2015 and quarter(s) 4 of 2016 is 18.033 %.
The change in mean anti-LGBTI hate crimes between quarter(s) 3,4 of 2015 and quarter(s) 3,4 of 2016 is 3.061 %.
The change in mean anti-LGBTI hate crimes between quarter(s) 2,3,4 of 2015 and quarter(s) 2,3,4 of 2016 is 2.5 %.
The change in mean anti-LGBTI hate crimes between quarter(s) 1,2,3,4 of 2015 and quarter(s) 1,2,3,4 of 2016 is 3.38 %.</code></pre>
<pre><code>[[1]]
NULL

[[2]]
NULL

[[3]]
NULL

[[4]]
NULL</code></pre>
</div>
<div id="cumulative-change-before-and-after-trumps-election-2016q4-3" class="section level3">
<h3>Cumulative change before and after Trump’s election (2016Q4)</h3>
<pre class="r"><code>map(0:7, ~calc_perc_change(data =qt_hate_LGBTI, .x ))</code></pre>
<pre><code>The change in mean anti-LGBTI hate crimes 3 months before and after Trump&#39;s election is -9.43 %.
The change in mean anti-LGBTI hate crimes 6 months before and after Trump&#39;s election is -10.84 %.
The change in mean anti-LGBTI hate crimes 9 months before and after Trump&#39;s election is -1.22 %.
The change in mean anti-LGBTI hate crimes 12 months before and after Trump&#39;s election is 6.27 %.
The change in mean anti-LGBTI hate crimes 15 months before and after Trump&#39;s election is 1.21 %.
The change in mean anti-LGBTI hate crimes 18 months before and after Trump&#39;s election is 0.27 %.
The change in mean anti-LGBTI hate crimes 21 months before and after Trump&#39;s election is 7.72 %.
The change in mean anti-LGBTI hate crimes 24 months before and after Trump&#39;s election is 12.18 %.</code></pre>
<pre><code>[[1]]
NULL

[[2]]
NULL

[[3]]
NULL

[[4]]
NULL

[[5]]
NULL

[[6]]
NULL

[[7]]
NULL

[[8]]
NULL</code></pre>
</div>
<div id="percentage-change-for-anti-lgbti" class="section level3">
<h3>Percentage change for Anti-LGBTI</h3>
<pre class="r"><code>map(0:4, calc_perc_change, data =qt_hate_LGBTI )</code></pre>
<pre><code>The change in mean anti-LGBTI hate crimes 3 months before and after Trump&#39;s election is -9.43 %.
The change in mean anti-LGBTI hate crimes 6 months before and after Trump&#39;s election is -10.84 %.
The change in mean anti-LGBTI hate crimes 9 months before and after Trump&#39;s election is -1.22 %.
The change in mean anti-LGBTI hate crimes 12 months before and after Trump&#39;s election is 6.27 %.
The change in mean anti-LGBTI hate crimes 15 months before and after Trump&#39;s election is 1.21 %.</code></pre>
<pre><code>[[1]]
NULL

[[2]]
NULL

[[3]]
NULL

[[4]]
NULL

[[5]]
NULL</code></pre>
</div>
</div>
</div>
<div id="wip" class="section level1">
<h1>WIP</h1>
<p>Using additive <a href="https://anomaly.io/seasonal-trend-decomposition-in-r/index.html" class="uri">https://anomaly.io/seasonal-trend-decomposition-in-r/index.html</a> <a href="https://www.stat.pitt.edu/stoffer/tsa4/tsa4.pdf" class="uri">https://www.stat.pitt.edu/stoffer/tsa4/tsa4.pdf</a></p>
<pre class="r"><code># library(fpp)
# library(forecast)
# 
# data(ausbeer) 
# tail(head(ausbeer))
# 
# tail(head(ausbeer, 17*4+2),17*4-4)
# timeserie_beer = tail(head(ausbeer, 17*4+2),17*4-4)
# plot(as.ts(timeserie_beer))
# trend_beer = ma(timeserie_beer, order = 4, centre = T)
# plot(as.ts(timeserie_beer))
# lines(trend_beer)
# plot(as.ts(trend_beer))
# detrend_beer = timeserie_beer - trend_beer
# plot(as.ts(detrend_beer))
# m_beer = t(matrix(data = detrend_beer, nrow = 4))
# seasonal_beer = colMeans(m_beer, na.rm = T)
# plot(as.ts(rep(seasonal_beer,16)))
# random_beer = timeserie_beer - trend_beer - seasonal_beer
# plot(as.ts(random_beer))
# recomposed_beer = trend_beer+seasonal_beer+random_beer
# plot(as.ts(recomposed_beer))
# ts_beer = ts(timeserie_beer, frequency = 4)
# decompose_beer = decompose(ts_beer, &quot;additive&quot;)
#  
# plot(as.ts(decompose_beer$seasonal))
# plot(as.ts(decompose_beer$trend))
# plot(as.ts(decompose_beer$random))
# plot(decompose_beer)
# 
# ts_beer = ts(timeserie_beer, frequency = 4)
# stl_beer = stl(ts_beer, &quot;periodic&quot;)
# seasonal_stl_beer   &lt;- stl_beer$time.series[,1]
# trend_stl_beer     &lt;- stl_beer$time.series[,2]
# random_stl_beer  &lt;- stl_beer$time.series[,3]
#  
# plot(ts_beer)
# plot(as.ts(seasonal_stl_beer))
# plot(trend_stl_beer)
# plot(random_stl_beer)
# plot(stl_beer)</code></pre>
<pre class="r"><code># str(timeserie_beer)
# 
# hate_vector &lt;- hate %&gt;% select(n) %&gt;% pull
# 
# ts_hate &lt;- ts(hate_vector, , start=c(1991, 1), end=c(2018, 12), frequency=12)
# ts_hate</code></pre>
<div id="references" class="section level2">
<h2>References</h2>
<div id="refs">
<div id="ref-hamilton-2018-WhyYouShould-res">
<p>Hamilton, James D. 2018. “Why You Should Never Use the Hodrick-Prescott Filter.” <em>The Review of Economics and Statistics</em> 100 (5): 831–43. <a href="https://doi.org/10.1162/rest_a_00706">https://doi.org/10.1162/rest_a_00706</a>.</p>
</div>
<div id="ref-rushin-2018-EffectPresidentTrump-sej">
<p>Rushin, Stephen, and Griffin Sims Edwards. 2018. “The Effect of President Trump’s Election on Hate Crimes.” <em>SSRN Electronic Journal</em>. <a href="https://doi.org/10.2139/ssrn.3102652">https://doi.org/10.2139/ssrn.3102652</a>.</p>
</div>
</div>
<br>
<p>
<button type="button" class="btn btn-default btn-workflowr btn-workflowr-sessioninfo" data-toggle="collapse" data-target="#workflowr-sessioninfo" style="display: block;">
<span class="glyphicon glyphicon-wrench" aria-hidden="true"></span> Session information
</button>
</p>
<div id="workflowr-sessioninfo" class="collapse">
<pre class="r"><code>sessionInfo()</code></pre>
<pre><code>R version 3.6.1 (2019-07-05)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS Mojave 10.14.6

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRblas.0.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRlapack.dylib

locale:
[1] en_GB.UTF-8/en_GB.UTF-8/en_GB.UTF-8/C/en_GB.UTF-8/en_GB.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] scales_1.0.0    lubridate_1.7.4 forcats_0.4.0   stringr_1.4.0  
 [5] dplyr_0.8.5     purrr_0.3.3     readr_1.3.1     tidyr_1.0.0    
 [9] tibble_2.1.3    ggplot2_3.3.0   tidyverse_1.2.1

loaded via a namespace (and not attached):
 [1] hrbrthemes_0.6.0  tidyselect_0.2.5  xfun_0.9         
 [4] haven_2.1.1       lattice_0.20-38   colorspace_1.4-1 
 [7] vctrs_0.2.4       generics_0.0.2    htmltools_0.3.6  
[10] yaml_2.2.0        utf8_1.1.4        rlang_0.4.6      
[13] pillar_1.4.3      glue_1.3.1        withr_2.1.2      
[16] gdtools_0.2.0     modelr_0.1.5      readxl_1.3.1     
[19] lifecycle_0.1.0   munsell_0.5.0     gtable_0.3.0     
[22] workflowr_1.4.0   cellranger_1.1.0  rvest_0.3.4      
[25] evaluate_0.14     labeling_0.3      knitr_1.25       
[28] extrafont_0.17    fansi_0.4.0       Rttf2pt1_1.3.7   
[31] broom_0.5.4       Rcpp_1.0.3        backports_1.1.5  
[34] jsonlite_1.6      systemfonts_0.1.1 fs_1.3.1         
[37] gridExtra_2.3     hms_0.5.2         digest_0.6.23    
[40] stringi_1.4.3     grid_3.6.1        rprojroot_1.3-2  
[43] here_0.1          cli_2.0.1         tools_3.6.1      
[46] magrittr_1.5      extrafontdb_1.0   crayon_1.3.4     
[49] whisker_0.4       pkgconfig_2.0.3   xml2_1.2.2       
[52] assertthat_0.2.1  rmarkdown_2.1     httr_1.4.1       
[55] rstudioapi_0.11   R6_2.4.0          nlme_3.1-141     
[58] git2r_0.26.1      compiler_3.6.1   </code></pre>
</div>
</div>
</div>


<!-- Adjust MathJax settings so that all math formulae are shown using
TeX fonts only; see
http://docs.mathjax.org/en/latest/configuration.html.  This will make
the presentation more consistent at the cost of the webpage sometimes
taking slightly longer to load. Note that this only works because the
footer is added to webpages before the MathJax javascript. -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": { availableFonts: ["TeX"] }
  });
</script>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
